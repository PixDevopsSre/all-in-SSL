import{d as e,Y as l,Z as t,_ as r,e as a,s,r as o,$ as c,u as i,o as n,c as u,N as d,i as m,a as _,a0 as x,b as f,a3 as p,B as v,ad as w,aa as b}from"./main-D37kYvfP.js";import{g}from"./public-CvlUccSb.js";import{u as h,N as y}from"./index-DuE5FJUK.js";import{F as k,C as T,a as $}from"./Flow-D8fET77H.js";const C={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},U=e({name:"ArrowRight",render:function(e,a){return t(),l("svg",C,a[0]||(a[0]=[r("path",{d:"M18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z",fill:"currentColor"},null,-1)]))}}),j=a("home-store",(()=>{const e=o(!1),l=o({workflow:{count:0,active:0,failure:0},cert:{count:0,will:0,end:0},site_monitor:{count:0,exception:0},workflow_history:[]}),{handleError:t}=h();return{loading:e,overviewData:l,fetchOverviewData:async()=>{try{e.value=!0;const{data:t,status:r}=await g().fetch();if(r){const{workflow:e,cert:r,site_monitor:a,workflow_history:s}=t;l.value={workflow:{count:(null==e?void 0:e.count)||0,active:(null==e?void 0:e.active)||0,failure:(null==e?void 0:e.failure)||0},cert:{count:(null==r?void 0:r.count)||0,will:(null==r?void 0:r.will)||0,end:(null==r?void 0:r.end)||0},site_monitor:{count:(null==a?void 0:a.count)||0,exception:(null==a?void 0:a.exception)||0},workflow_history:s||[]}}}catch(r){t(r).default(c("t_3_1745833936770"))}finally{e.value=!1}}}})),z=()=>{const e=j();return{...e,...s(e)}},D={stateText:"_stateText_1axc1_2",success:"_success_1axc1_3",warning:"_warning_1axc1_4",error:"_error_1axc1_5",info:"_info_1axc1_6",default:"_default_1axc1_7",cardHover:"_cardHover_1axc1_11",quickEntryCard:"_quickEntryCard_1axc1_20",workflow:"_workflow_1axc1_31",iconWrapper:"_iconWrapper_1axc1_35",title:"_title_1axc1_40",cert:"_cert_1axc1_45",monitor:"_monitor_1axc1_59",tableText:"_tableText_1axc1_89",workflowIcon:"_workflowIcon_1axc1_98",certIcon:"_certIcon_1axc1_99",monitorIcon:"_monitorIcon_1axc1_100",bgUtilSuccess:"_bgUtilSuccess_1axc1_106",bgUtilError:"_bgUtilError_1axc1_109",bgUtilWarning:"_bgUtilWarning_1axc1_113",bgUtilDecorative:"_bgUtilDecorative_1axc1_117"};function E(){const e=i(),{overviewData:l,fetchOverviewData:t}=z();function r(e){switch(e){case 1:return"success";case 0:return"warning";case-1:return"error";default:return"default"}}function a(e){switch(e){case 1:return c("t_8_1745227838023");case 0:return c("t_0_1747795605426");case-1:return c("t_9_1745227838305");default:return c("t_11_1745227838422")}}function s(e){return new Date(e).toLocaleString()}return n(t),{overviewData:l,pushToWorkflow:function(l=""){e.push("/auto-deploy"+(l?`?type=${l}`:""))},pushToCert:function(l=""){e.push("/cert-apply"+(l?`?type=${l}`:""))},pushToMonitor:function(l=""){e.push("/monitor"+(l?`?type=${l}`:""))},pushToCertManage:function(){e.push("/cert-manage")},getWorkflowStateType:r,getWorkflowStateText:a,formatExecTime:s,createColumns:function(){return[{title:c("t_2_1745289353944"),key:"name"},{title:c("t_0_1746590054456"),key:"state",render:e=>{const l=r(e.state),t=a(e.state);return u(d,{type:l,size:"small",class:`${D.stateText} ${D[l]}`},"function"==typeof(s=t)||"[object Object]"===Object.prototype.toString.call(s)&&!m(s)?t:{default:()=>[t]});var s}},{title:c("t_1_1746590060448"),key:"mode",render:e=>u("span",{class:D.tableText},[e.mode||c("t_11_1745227838422")])},{title:c("t_4_1745227838558"),key:"exec_time",render:e=>u("span",{class:D.tableText},[s(e.exec_time)])}]}}}const W=e({name:"HomeView",setup(){const{loading:e}=z(),{overviewData:l,pushToWorkflow:t,pushToCert:r,pushToMonitor:a,pushToCertManage:s,createColumns:o}=E(),i=o(),n=_(["successColor","errorColor","warningColor","primaryColor"]);return()=>u("div",{class:"mx-auto max-w-[1600px] w-full p-6",style:n.value},[u(y,{show:e.value},{default:()=>[u("div",{class:"flex flex-col h-full gap-8"},[u("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[u("div",{onClick:()=>t(),class:"cursor-pointer relative"},[u("div",{class:`absolute right-0 top-0 w-24 h-24 rounded-full opacity-70 -z-10 ${D.bgUtilDecorative}`},null),u(x,{class:"transition-all duration-300 rounded-[0.6rem]",hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center justify-center"},[u("div",{class:"flex-1"},[u("div",{class:D.tableText},[c("t_2_1746773350970")]),u("div",{class:"flex items-center xl:space-x-5 lg:space-x-4 md:space-x-3 space-x-3"},[u("div",null,[u("span",{class:"xl:text-[2.4rem] lg:text-[2.2rem] md:text-[2rem] text-[1.8rem] font-bold"},[l.value.workflow.count]),u("p",{class:D.tableText},[c("t_3_1746773348798")])]),u("div",{class:"border-l-2 xl:pl-[2rem] xl:ml-[3rem] lg:pl-[1.5rem] lg:ml-[2.5rem] md:pl-[1.5rem] md:ml-[2rem] pl-[1rem] ml-[1.5rem] min-h-[5rem] flex flex-col justify-center"},[u("div",{class:"flex items-center space-x-1"},[u("span",{class:`w-4 h-4 rounded-full mr-[.6rem] ${D.bgUtilSuccess}`},null),u("span",{class:D.tableText},[c("t_0_1746782379424"),f(": "),l.value.workflow.active])]),u("div",{class:"flex items-center space-x-1 mt-3"},[u("span",{class:`w-4 h-4 rounded-full mr-[.6rem] ${D.bgUtilError}`},null),u("span",{class:D.tableText},[c("t_4_1746773348957"),f(": "),l.value.workflow.failure])])])])]),u("div",{class:D.workflowIcon},[u(p,{size:"28"},{default:()=>[u(k,null,null)]})])])]})]),u("div",{onClick:()=>s(),class:"cursor-pointer relative"},[u("div",{class:`absolute right-0 top-0 w-24 h-24 rounded-full opacity-70 -z-10 ${D.bgUtilDecorative}`},null),u(x,{class:"transition-all duration-300 rounded-[0.6rem]",hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center justify-center"},[u("div",{class:"flex-1"},[u("div",{class:D.tableText},[c("t_2_1744258111238")]),u("div",{class:"flex items-center xl:space-x-5 lg:space-x-4 md:space-x-3 space-x-3"},[u("div",null,[u("span",{class:"xl:text-[2.4rem] lg:text-[2.2rem] md:text-[2rem] text-[1.8rem] font-bold"},[l.value.cert.count]),u("p",{class:D.tableText},[c("t_3_1746773348798")])]),u("div",{class:"border-l-2 xl:pl-[2rem] xl:ml-[3rem] lg:pl-[1.5rem] lg:ml-[2.5rem] md:pl-[1.5rem] md:ml-[2rem] pl-[1rem] ml-[1.5rem] min-h-[5rem] flex flex-col justify-center"},[u("div",{class:"flex items-center space-x-1"},[u("span",{class:`w-4 h-4 rounded-full mr-[.6rem] ${D.bgUtilWarning}`},null),u("span",{class:D.tableText},[c("t_5_1746773349141"),f(": "),l.value.cert.will])]),u("div",{class:"flex items-center space-x-1 mt-3"},[u("span",{class:`w-4 h-4 rounded-full mr-[.6rem] ${D.bgUtilError}`},null),u("span",{class:D.tableText},[c("t_0_1746001199409"),f(": "),l.value.cert.end])])])])]),u("div",{class:D.certIcon},[u(p,{size:"28"},{default:()=>[u(T,null,null)]})])])]})]),u("div",{onClick:()=>a(),class:"cursor-pointer relative"},[u("div",{class:`absolute right-0 top-0 w-24 h-24 rounded-full opacity-70 -z-10 ${D.bgUtilDecorative}`},null),u(x,{class:"transition-all duration-300 rounded-[0.6rem]",hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center justify-center"},[u("div",{class:"flex-1"},[u("div",{class:D.tableText},[c("t_6_1746773349980")]),u("div",{class:"flex items-center xl:space-x-5 lg:space-x-4 md:space-x-3 space-x-3"},[u("div",null,[u("span",{class:"xl:text-[2.4rem] lg:text-[2.2rem] md:text-[2rem] text-[1.8rem] font-bold"},[l.value.site_monitor.count]),u("p",{class:D.tableText},[c("t_3_1746773348798")])]),u("div",{class:"border-l-2 xl:pl-[2rem] xl:ml-[3rem] lg:pl-[1.5rem] lg:ml-[2.5rem] md:pl-[1.5rem] md:ml-[2rem] pl-[1rem] ml-[1.5rem] min-h-[5rem] flex flex-col justify-center"},[u("div",{class:"flex items-center space-x-1"},[u("span",{class:`w-4 h-4 rounded-full mr-[.6rem] ${D.bgUtilError}`},null),u("span",{class:D.tableText},[c("t_7_1746773349302"),f(": "),l.value.site_monitor.exception])])])])]),u("div",{class:D.monitorIcon},[u(p,{size:"28"},{default:()=>[u($,null,null)]})])])]})])]),u(x,{class:"rounded-[0.6rem] transition-all duration-300",hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex justify-between items-center mb-4"},[u("div",{class:D.tableText},[c("t_8_1746773351524")]),u(v,{text:!0,type:"primary",onClick:()=>t(),class:D.viewAllButton},{default:()=>[c("t_9_1746773348221"),u(p,{class:"ml-1"},{default:()=>[u(U,null,null)]})]})]),l.value.workflow_history.length>0?u(w,{columns:i,data:l.value.workflow_history,bordered:!1,size:"small",singleLine:!1,rowClassName:()=>"border-none",class:"border-none",style:{"--n-border-color":"transparent","--n-border-radius":"0"}},null):u(b,{description:c("t_10_1746773351576")},null)]}),u("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[u("div",{onClick:()=>t("create"),class:"cursor-pointer"},[u(x,{class:`${D.quickEntryCard} ${D.workflow} transition-all duration-300`,hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center p-6"},[u("div",{class:`${D.iconWrapper} mr-6`},[u(p,{size:"32"},{default:()=>[u(k,null,null)]})]),u("div",{class:"flex-1"},[u("div",{class:`${D.title} text-[1.8rem] font-medium mb-3`},[c("t_11_1746773349054")]),u("div",{class:D.tableText},[c("t_12_1746773355641")])])])]})]),u("div",{onClick:()=>r(),class:"cursor-pointer"},[u(x,{class:`${D.quickEntryCard} ${D.cert} transition-all duration-300 rounded-[0.6rem]`,hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center p-6"},[u("div",{class:`${D.iconWrapper} mr-6`},[u(p,{size:"32"},{default:()=>[u(T,null,null)]})]),u("div",{class:"flex-1"},[u("div",{class:`${D.title} text-[1.8rem] font-medium mb-3`},[c("t_13_1746773349526")]),u("div",{class:D.tableText},[c("t_14_1746773355081")])])])]})]),u("div",{onClick:()=>a("create"),class:"cursor-pointer"},[u(x,{class:`${D.quickEntryCard} ${D.monitor} transition-all duration-300 rounded-[0.6rem]`,hoverable:!0,bordered:!1},{default:()=>[u("div",{class:"flex items-center p-6"},[u("div",{class:`${D.iconWrapper} mr-6`},[u(p,{size:"32"},{default:()=>[u($,null,null)]})]),u("div",{class:"flex-1"},[u("div",{class:`${D.title} text-[1.8rem] font-medium mb-3`},[c("t_11_1745289354516")]),u("div",{class:D.tableText},[c("t_1_1747019624067")])])])]})])])])]})])}});export{W as default};

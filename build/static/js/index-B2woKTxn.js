var e=Object.defineProperty,t=(t,n,a)=>((t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a)(t,"symbol"!=typeof n?n+"":n,a);import{E as n,G as a,d as l,H as o,I as r,K as i,bd as s,k as d,aW as u,M as c,F as p,D as v,be as f,aj as _,aZ as h,a$ as m,aU as y,bf as g,O as b,W as w,aS as N,aN as x,bg as k,ae as C,bh as S,bi as j,A as z,b2 as $,ai as O,Y as A,Z as R,_ as I,bj as D,bk as E,bl as F,bm as M,bn as B,bo as q,bp as V,bq as P,br as U,bs as T,bt as L,bu as H,bv as Z,bw as W,r as J,bx as G,by as Y,bz as K,bA as X,e as Q,s as ee,$ as te,a as ne,x as ae,aD as le,c as oe,l as re,az as ie,w as se,t as de,m as ue,B as ce,n as pe,aq as ve,q as fe,v as _e,a5 as he,y as me,o as ye,z as ge,i as be,j as we,f as Ne,bB as xe,bC as ke,b as Ce,p as Se,bD as je,a0 as ze,bE as $e,bF as Oe,u as Ae,a4 as Re,bG as Ie,bH as De,a7 as Ee,a3 as Fe,bI as Me}from"./main-DzwaUoFb.js";import{_ as Be,i as qe,N as Ve,u as Pe,a as Ue}from"./index-BNb4DSrN.js";import{_ as Te,b as Le,c as He,t as Ze,e as We,w as Je,v as Ge,d as Ye,N as Ke,a as Xe}from"./business-Ckv_hx4t.js";import{a as Qe,u as et}from"./index-sgsDdEi4.js";import{D as tt}from"./index-BQsku81q.js";import{n as nt}from"./utils-CRt-4gJj.js";import{c as at,b as lt,i as ot}from"./access-D1d2FuYi.js";import{S as rt}from"./index-Dhf2Wig3.js";import{C as it,A as st}from"./data-BqkycWmp.js";import{T as dt}from"./index-DeqXP45Z.js";import{N as ut,a as ct}from"./Tabs-CP4vdC9u.js";import{N as pt}from"./index-D-9f_RTw.js";import{u as vt,g as ft}from"./cert-DsM7Ew74.js";import{f as _t}from"./useStore-Bzsn7zfX.js";import"./useStore-C7yqmA9q.js";import"./index-QkiriD3I.js";import"./setting-BDH9NQKu.js";import"./throttle-cf_E8cS3.js";const ht=n("input-group-label","\n position: relative;\n user-select: none;\n -webkit-user-select: none;\n box-sizing: border-box;\n padding: 0 12px;\n display: inline-block;\n border-radius: var(--n-border-radius);\n background-color: var(--n-group-label-color);\n color: var(--n-group-label-text-color);\n font-size: var(--n-font-size);\n line-height: var(--n-height);\n height: var(--n-height);\n flex-shrink: 0;\n white-space: nowrap;\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[a("border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n border: var(--n-group-label-border);\n transition: border-color .3s var(--n-bezier);\n ")]),mt=l({name:"InputGroupLabel",props:Object.assign(Object.assign({},i.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:void 0}}),setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:n,inlineThemeDisabled:a}=r(e),l=i("Input","-input-group-label",ht,s,e,n),o=d((()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:{groupLabelColor:a,borderRadius:o,groupLabelTextColor:r,lineHeight:i,groupLabelBorder:s,[u("fontSize",t)]:d,[u("height",t)]:c}}=l.value;return{"--n-bezier":n,"--n-group-label-color":a,"--n-group-label-border":s,"--n-border-radius":o,"--n-group-label-text-color":r,"--n-font-size":d,"--n-line-height":i,"--n-height":c}})),p=a?c("input-group-label",d((()=>e.size[0])),o,e):void 0;return{mergedClsPrefix:n,mergedBordered:t,cssVars:a?void 0:o,themeClass:null==p?void 0:p.themeClass,onRender:null==p?void 0:p.onRender}},render(){var e,t,n;const{mergedClsPrefix:a}=this;return null===(e=this.onRender)||void 0===e||e.call(this),o("div",{class:[`${a}-input-group-label`,this.themeClass],style:this.cssVars},null===(n=(t=this.$slots).default)||void 0===n?void 0:n.call(t),this.mergedBordered?o("div",{class:`${a}-input-group-label__border`}):null)}}),yt=n("steps","\n width: 100%;\n display: flex;\n",[n("step","\n position: relative;\n display: flex;\n flex: 1;\n ",[p("disabled","cursor: not-allowed"),p("clickable","\n cursor: pointer;\n "),v("&:last-child",[n("step-splitor","display: none;")])]),n("step-splitor","\n background-color: var(--n-splitor-color);\n margin-top: calc(var(--n-step-header-font-size) / 2);\n height: 1px;\n flex: 1;\n align-self: flex-start;\n margin-left: 12px;\n margin-right: 12px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),n("step-content","flex: 1;",[n("step-content-header","\n color: var(--n-header-text-color);\n margin-top: calc(var(--n-indicator-size) / 2 - var(--n-step-header-font-size) / 2);\n line-height: var(--n-step-header-font-size);\n font-size: var(--n-step-header-font-size);\n position: relative;\n display: flex;\n font-weight: var(--n-step-header-font-weight);\n margin-left: 9px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ",[a("title","\n white-space: nowrap;\n flex: 0;\n ")]),a("description","\n color: var(--n-description-text-color);\n margin-top: 12px;\n margin-left: 9px;\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ")]),n("step-indicator","\n background-color: var(--n-indicator-color);\n box-shadow: 0 0 0 1px var(--n-indicator-border-color);\n height: var(--n-indicator-size);\n width: var(--n-indicator-size);\n border-radius: 50%;\n display: flex;\n align-items: center;\n justify-content: center;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ",[n("step-indicator-slot","\n position: relative;\n width: var(--n-indicator-icon-size);\n height: var(--n-indicator-icon-size);\n font-size: var(--n-indicator-icon-size);\n line-height: var(--n-indicator-icon-size);\n ",[a("index","\n display: inline-block;\n text-align: center;\n position: absolute;\n left: 0;\n top: 0;\n white-space: nowrap;\n font-size: var(--n-indicator-index-font-size);\n width: var(--n-indicator-icon-size);\n height: var(--n-indicator-icon-size);\n line-height: var(--n-indicator-icon-size);\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[f()]),n("icon","\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[f()]),n("base-icon","\n color: var(--n-indicator-text-color);\n transition: color .3s var(--n-bezier);\n ",[f()])])]),p("vertical","flex-direction: column;",[_("show-description",[v(">",[n("step","padding-bottom: 8px;")])]),v(">",[n("step","margin-bottom: 16px;",[v("&:last-child","margin-bottom: 0;"),v(">",[n("step-indicator",[v(">",[n("step-splitor","\n position: absolute;\n bottom: -8px;\n width: 1px;\n margin: 0 !important;\n left: calc(var(--n-indicator-size) / 2);\n height: calc(100% - var(--n-indicator-size));\n ")])]),n("step-content",[a("description","margin-top: 8px;")])])])])])]);function gt(e){return e.map(((e,t)=>function(e,t){return"object"!=typeof e||null===e||Array.isArray(e)?null:(e.props||(e.props={}),e.props.internalIndex=t+1,e)}(e,t)))}const bt=Object.assign(Object.assign({},i.props),{current:Number,status:{type:String,default:"process"},size:{type:String,default:"medium"},vertical:Boolean,"onUpdate:current":[Function,Array],onUpdateCurrent:[Function,Array]}),wt=b("n-steps"),Nt=l({name:"Steps",props:bt,slots:Object,setup(e,{slots:t}){const{mergedClsPrefixRef:n,mergedRtlRef:a}=r(e),l=y("Steps",a,n),o=i("Steps","-steps",yt,g,e,n);return w(wt,{props:e,mergedThemeRef:o,mergedClsPrefixRef:n,stepsSlots:t}),{mergedClsPrefix:n,rtlEnabled:l}},render(){const{mergedClsPrefix:e}=this;return o("div",{class:[`${e}-steps`,this.rtlEnabled&&`${e}-steps--rtl`,this.vertical&&`${e}-steps--vertical`]},gt(h(m(this))))}}),xt=l({name:"Step",props:{status:String,title:String,description:String,disabled:Boolean,internalIndex:{type:Number,default:0}},slots:Object,setup(e){const t=z(wt,null);t||$("step","`n-step` must be placed inside `n-steps`.");const{inlineThemeDisabled:n}=r(),{props:a,mergedThemeRef:l,mergedClsPrefixRef:o,stepsSlots:i}=t,s=d((()=>a.vertical)),p=d((()=>{const{status:t}=e;if(t)return t;{const{internalIndex:t}=e,{current:n}=a;if(void 0===n)return"process";if(t<n)return"finish";if(t===n)return a.status||"process";if(t>n)return"wait"}return"process"})),v=d((()=>{const{value:e}=p,{size:t}=a,{common:{cubicBezierEaseInOut:n},self:{stepHeaderFontWeight:o,[u("stepHeaderFontSize",t)]:r,[u("indicatorIndexFontSize",t)]:i,[u("indicatorSize",t)]:s,[u("indicatorIconSize",t)]:d,[u("indicatorTextColor",e)]:c,[u("indicatorBorderColor",e)]:v,[u("headerTextColor",e)]:f,[u("splitorColor",e)]:_,[u("indicatorColor",e)]:h,[u("descriptionTextColor",e)]:m}}=l.value;return{"--n-bezier":n,"--n-description-text-color":m,"--n-header-text-color":f,"--n-indicator-border-color":v,"--n-indicator-color":h,"--n-indicator-icon-size":d,"--n-indicator-index-font-size":i,"--n-indicator-size":s,"--n-indicator-text-color":c,"--n-splitor-color":_,"--n-step-header-font-size":r,"--n-step-header-font-weight":o}})),f=n?c("step",d((()=>{const{value:e}=p,{size:t}=a;return`${e[0]}${t[0]}`})),v,a):void 0,_=d((()=>{if(e.disabled)return;const{onUpdateCurrent:t,"onUpdate:current":n}=a;return t||n?()=>{t&&O(t,e.internalIndex),n&&O(n,e.internalIndex)}:void 0}));return{stepsSlots:i,mergedClsPrefix:o,vertical:s,mergedStatus:p,handleStepClick:_,cssVars:n?void 0:v,themeClass:null==f?void 0:f.themeClass,onRender:null==f?void 0:f.onRender}},render(){const{mergedClsPrefix:e,onRender:t,handleStepClick:n,disabled:a}=this,l=N(this.$slots.default,(t=>{const n=t||this.description;return n?o("div",{class:`${e}-step-content__description`},n):null}));return null==t||t(),o("div",{class:[`${e}-step`,a&&`${e}-step--disabled`,!a&&n&&`${e}-step--clickable`,this.themeClass,l&&`${e}-step--show-description`,`${e}-step--${this.mergedStatus}-status`],style:this.cssVars,onClick:n},o("div",{class:`${e}-step-indicator`},o("div",{class:`${e}-step-indicator-slot`},o(k,null,{default:()=>N(this.$slots.icon,(t=>{const{mergedStatus:n,stepsSlots:a}=this;return"finish"!==n&&"error"!==n?t||o("div",{key:this.internalIndex,class:`${e}-step-indicator-slot__index`},this.internalIndex):"finish"===n?o(C,{clsPrefix:e,key:"finish"},{default:()=>x(a["finish-icon"],(()=>[o(S,null)]))}):"error"===n?o(C,{clsPrefix:e,key:"error"},{default:()=>x(a["error-icon"],(()=>[o(j,null)]))}):null}))})),this.vertical?o("div",{class:`${e}-step-splitor`}):null),o("div",{class:`${e}-step-content`},o("div",{class:`${e}-step-content-header`},o("div",{class:`${e}-step-content-header__title`},x(this.$slots.title,(()=>[this.title]))),this.vertical?null:o("div",{class:`${e}-step-splitor`})),l))}}),kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ct=l({name:"ArrowLeftOutlined",render:function(e,t){return R(),A("svg",kt,t[0]||(t[0]=[I("path",{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 0 0 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1)]))}}),St={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},jt=l({name:"SaveOutlined",render:function(e,t){return R(),A("svg",St,t[0]||(t[0]=[I("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1)]))}}),zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},$t=l({name:"SearchOutlined",render:function(e,t){return R(),A("svg",zt,t[0]||(t[0]=[I("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1)]))}}),Ot={"@@functional/placeholder":!0},At=Number.isInteger||function(e){return(e|0)===e};function Rt(e,t){var n=e<0?t.length+e:e;return D(t)?t.charAt(n):t[n]}var It=E((function(e,t){if(null!=t)return At(e)?Rt(e,t):t[e]}));function Dt(e,t,n){for(var a=0,l=n.length;a<l;){if((t=e["@@transducer/step"](t,n[a]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a+=1}return e["@@transducer/result"](t)}var Et=E((function(e,t){return F(e.length,(function(){return e.apply(t,arguments)}))}));function Ft(e,t,n){for(var a=n.next();!a.done;){if((t=e["@@transducer/step"](t,a.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a=n.next()}return e["@@transducer/result"](t)}function Mt(e,t,n,a){return e["@@transducer/result"](n[a](Et(e["@@transducer/step"],e),t))}var Bt=M(Dt,Mt,Ft),qt=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function Vt(e){return new qt(e)}var Pt=Be((function(e,t,n){return Bt("function"==typeof e?Vt(e):e,t,n)}));function Ut(e){return function e(t){for(var n,a,l,o=[],r=0,i=t.length;r<i;){if(B(t[r]))for(l=0,a=(n=e(t[r])).length;l<a;)o[o.length]=n[l],l+=1;else o[o.length]=t[r];r+=1}return o}}function Tt(e,t,n){if(n||(n=new Lt),l=typeof(a=e),null==a||"object"!=l&&"function"!=l)return e;var a,l,o=function(t){var a=n.get(e);if(a)return a;for(var l in n.set(e,t),e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t};switch(q(e)){case"Object":return o(Object.create(Object.getPrototypeOf(e)));case"Array":return o(Array(e.length));case"Date":return new Date(e.valueOf());case"RegExp":return Te(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var Lt=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(e,t){var n=this.hash(e),a=this.map[n];a||(this.map[n]=a=[]),a.push([e,t]),this.length+=1},e.prototype.hash=function(e){var t=[];for(var n in e)t.push(Object.prototype.toString.call(e[n]));return t.join()},e.prototype.get=function(e){if(this.length<=180)for(var t in this.map)for(var n=this.map[t],a=0;a<n.length;a+=1){if((o=n[a])[0]===e)return o[1]}else{var l=this.hash(e);if(n=this.map[l])for(a=0;a<n.length;a+=1){var o;if((o=n[a])[0]===e)return o[1]}}},e}();function Ht(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Zt(e,t){return function(){var n=arguments.length;if(0===n)return t();var a=arguments[n-1];return V(a)||"function"!=typeof a[e]?t.apply(this,arguments):a[e].apply(a,Array.prototype.slice.call(arguments,0,n-1))}}var Wt=P(Zt("tail",Be(Zt("slice",(function(e,t,n){return Array.prototype.slice.call(n,e,t)})))(1,1/0)));var Jt=function(){function e(e,t,n,a){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=U.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(T(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,Tt(this.valueAcc)],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}();function Gt(e,t,n){return function(a){return new Jt(e,t,n,a)}}var Yt=L(4,[],H([],Gt,(function(e,t,n,a){var l=Vt((function(a,l){var o=n(l),r=e(T(o,a)?a[o]:Tt(t),l);return r&&r["@@transducer/reduced"]?Le(a):(a[o]=r,a)}));return Bt(l,{},a)}))),Kt=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!Xt(e,!0,this)},e.prototype.has=function(e){return Xt(e,!1,this)},e}();function Xt(e,t,n){var a,l=typeof e;switch(l){case"string":case"number":return 0===e&&1/e==-1/0?!!n._items["-0"]||(t&&(n._items["-0"]=!0),!1):null!==n._nativeSet?t?(a=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===a):n._nativeSet.has(e):l in n._items?e in n._items[l]||(t&&(n._items[l][e]=!0),!1):(t&&(n._items[l]={},n._items[l][e]=!0),!1);case"boolean":if(l in n._items){var o=e?1:0;return!!n._items[l][o]||(t&&(n._items[l][o]=!0),!1)}return t&&(n._items[l]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?t?(a=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===a):n._nativeSet.has(e):l in n._items?!!He(e,n._items[l])||(t&&n._items[l].push(e),!1):(t&&(n._items[l]=[e]),!1);case"undefined":return!!n._items[l]||(t&&(n._items[l]=!0),!1);case"object":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(l=Object.prototype.toString.call(e))in n._items?!!He(e,n._items[l])||(t&&n._items[l].push(e),!1):(t&&(n._items[l]=[e]),!1)}}var Qt=P(Ut()),en=P((function(e){return Z(e.length,(function(t,n){var a=Array.prototype.slice.call(arguments,0);return a[0]=n,a[1]=t,e.apply(this,a)}))})),tn=E(Zt("groupBy",Yt((function(e,t){return e.push(t),e}),[]))),nn=E((function(e,t){return e>=t})),an=E((function(e,t){if(0===e.length||W(t))return!1;for(var n=t,a=0;a<e.length;){if(W(n)||!T(e[a],n))return!1;n=n[e[a]],a+=1}return!0})),ln=E((function(e,t){return an([e],t)})),on=Yt((function(e,t){return t}),null),rn=function(){function e(e,t){this.xf=t,this.f=e,this.set=new Kt}return e.prototype["@@transducer/init"]=U.init,e.prototype["@@transducer/result"]=U.result,e.prototype["@@transducer/step"]=function(e,t){return this.set.add(this.f(t))?this.xf["@@transducer/step"](e,t):e},e}();function sn(e){return function(t){return new rn(e,t)}}var dn=E(H([],sn,(function(e,t){for(var n,a,l=new Kt,o=[],r=0;r<t.length;)n=e(a=t[r]),l.add(n)&&o.push(a),r+=1;return o})))(qe);function un(e,t){for(var n=t,a=0;a<e.length;a+=1){if(null==n)return;var l=e[a];n=At(l)?Rt(l,n):n[l]}return n}var cn=E((function(e,t){return e<=t})),pn=E(un),vn=E((function(e,t){for(var n=0,a=Math.min(e.length,t.length),l={};n<a;)l[e[n]]=t[n],n+=1;return l}));const fn=new class{constructor(){t(this,"validators",new Map),t(this,"validationResults",new Map),t(this,"valuesMap",new Map),t(this,"rulesMap",new Map)}register(e,t){this.validators.set(e,t),this.validate(e)}unregister(e){this.validators.delete(e),this.validationResults.delete(e),this.valuesMap.delete(e)}unregisterAll(){this.validators.clear(),this.validationResults.clear(),this.valuesMap.clear()}registerCompatValidator(e,t,n){n?this.valuesMap.set(e,{...n}):this.valuesMap.set(e,{});this.validators.set(e,(()=>this.validateWithRules(e,t)))}setValue(e,t,n){const a=this.valuesMap.get(e)||{};a[t]=n,this.valuesMap.set(e,a)}setValues(e,t){const n=this.valuesMap.get(e)||{};this.valuesMap.set(e,{...n,...t})}getValue(e,t){return(this.valuesMap.get(e)||{})[t]}getValues(e){return this.valuesMap.get(e)||{}}validateWithRules(e,t){const n=this.valuesMap.get(e)||{};for(const l in t){const e=Array.isArray(t[l])?t[l]:[t[l]],o=n[l];if(l in n)for(const t of e){if(t.required&&(null==o||""===o)){return{valid:!1,message:t.message||`${l}是必填项`}}if(null!=o&&""!==o||t.required){if(t.type&&!this.validateType(t.type,o)){return{valid:!1,message:t.message||`${l}的类型应为${t.type}`}}if(t.pattern&&!t.pattern.test(String(o))){return{valid:!1,message:t.message||`${l}格式不正确`}}if("string"===t.type||"array"===t.type){const e=o.length||0;if(void 0!==t.len&&e!==t.len){return{valid:!1,message:t.message||`${l}的长度应为${t.len}`}}if(void 0!==t.min&&e<t.min){return{valid:!1,message:t.message||`${l}的长度不应小于${t.min}`}}if(void 0!==t.max&&e>t.max){return{valid:!1,message:t.message||`${l}的长度不应大于${t.max}`}}}if("number"===t.type){if(void 0!==t.len&&o!==t.len){return{valid:!1,message:t.message||`${l}应等于${t.len}`}}if(void 0!==t.min&&o<t.min){return{valid:!1,message:t.message||`${l}不应小于${t.min}`}}if(void 0!==t.max&&o>t.max){return{valid:!1,message:t.message||`${l}不应大于${t.max}`}}}if(t.enum&&!t.enum.includes(o)){return{valid:!1,message:t.message||`${l}的值不在允许范围内`}}if(t.whitespace&&"string"===t.type&&!o.trim()){return{valid:!1,message:t.message||`${l}不能只包含空白字符`}}if(t.validator)try{const e=t.validator(t,o,void 0);if(!1===e){return{valid:!1,message:t.message||`${l}验证失败`}}if(e instanceof Error)return{valid:!1,message:e.message};if(Array.isArray(e)&&e.length>0&&e[0]instanceof Error)return{valid:!1,message:e[0].message}}catch(a){return{valid:!1,message:a instanceof Error?a.message:`${l}验证出错`}}}}}return{valid:!0,message:""}}validateType(e,t){switch(e){case"string":return"string"==typeof t;case"number":return"number"==typeof t&&!isNaN(t);case"boolean":return"boolean"==typeof t;case"method":return"function"==typeof t;case"regexp":return t instanceof RegExp;case"integer":return"number"==typeof t&&Number.isInteger(t);case"float":return"number"==typeof t&&!Number.isInteger(t);case"array":return Array.isArray(t);case"object":return"object"==typeof t&&!Array.isArray(t)&&null!==t;case"enum":return!0;case"date":return t instanceof Date;case"url":try{return new URL(t),!0}catch(n){return!1}case"email":return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t);default:return!0}}validate(e){const t=this.validators.get(e);if(t){const n=t();return this.validationResults.set(e,n),n}return{valid:!1,message:""}}validateAll(){let e=!0;const t={};return this.validators.forEach(((n,a)=>{const l=this.validate(a);t[a]=l,l.valid||(e=!1)})),{valid:e,results:t}}getValidationResult(e){return this.validationResults.get(e)||{valid:!0,message:""}}};function _n(){const e=J({valid:!1,message:""});return{validationResult:e,registerValidator:(t,n)=>{fn.register(t,n),e.value=fn.getValidationResult(t)},registerCompatValidator:(t,n,a)=>{fn.registerCompatValidator(t,n,a),e.value=fn.getValidationResult(t)},setFieldValue:(e,t,n)=>{fn.setValue(e,t,n)},setFieldValues:(e,t)=>{fn.setValues(e,t)},getFieldValue:(e,t)=>fn.getValue(e,t),getFieldValues:e=>fn.getValues(e),validate:t=>{const n=fn.validate(t);return e.value=n,n},unregisterValidator:e=>{fn.unregister(e)},validator:fn}}G(((e,t)=>{const n=new Date(e),a=new Date(t),l=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime()-l.getTime();return Math.floor(o/864e5)}));G(((e,t,n)=>{const a=new Date(e).getTime(),l=new Date(t).getTime(),o=new Date(n).getTime();return a>=l&&a<=o}));G(((e,t)=>{const n=new Date(t);return n.setDate(n.getDate()+e),n})),K(String),G(((e,t)=>on(It(e),t))),G(((e,t)=>Ze(e,t))),G(((e,t)=>We(en(ln)(e),t))),G(((e,t,n)=>X(nn(Ot,e),cn(Ot,t))(n))),G(((e,t)=>Object.fromEntries(Object.entries(t).filter((([t,n])=>e(n)))))),G(((e,t)=>tn(It(e),t))),G(((e,t)=>K(pn(e),t))),function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");F(arguments[0].length,Pt(Ht,arguments[0],Wt(arguments)))}(Qt,dn);const hn=(e,t,n=!0)=>{const a={...e};for(const l in t)if(t.hasOwnProperty(l)){const o=t[l],r=e[l];Array.isArray(o)&&Array.isArray(r)?a[l]=n?[...r,...o]:o:mn(o)&&mn(r)?a[l]=hn(r,o):a[l]=o}return a},mn=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),yn=e=>JSON.parse(JSON.stringify(e)),gn=[];for(let El=0;El<256;++El)gn.push((El+256).toString(16).slice(1));let bn;const wn=new Uint8Array(16);const Nn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function xn(e,t,n){var a;if(Nn.randomUUID&&!e)return Nn.randomUUID();const l=(e=e||{}).random??(null==(a=e.rng)?void 0:a.call(e))??function(){if(!bn){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bn=crypto.getRandomValues.bind(crypto)}return bn(wn)}();if(l.length<16)throw new Error("Random bytes length must be >= 16");return l[6]=15&l[6]|64,l[8]=63&l[8]|128,function(e,t=0){return(gn[e[t+0]]+gn[e[t+1]]+gn[e[t+2]]+gn[e[t+3]]+"-"+gn[e[t+4]]+gn[e[t+5]]+"-"+gn[e[t+6]]+gn[e[t+7]]+"-"+gn[e[t+8]]+gn[e[t+9]]+"-"+gn[e[t+10]]+gn[e[t+11]]+gn[e[t+12]]+gn[e[t+13]]+gn[e[t+14]]+gn[e[t+15]]).toLowerCase()}(l)}const kn="start",Cn="branch",Sn="condition",jn="execute_result_branch",zn="execute_result_condition",$n="upload",On="notify",An="apply",Rn="deploy",In={},Dn=e=>hn({title:{name:"",color:"#FFFFFF",bgColor:"#3CB371"},icon:{name:"",color:"#3CB371"},operateNode:{add:!0,sort:1,addBranch:!1,edit:!0,remove:!0,onSupportNode:[]},isHasDrawer:!1,defaultNode:{}},e);In[kn]=()=>Dn({title:{name:"开始"},operateNode:{onSupportNode:[jn],remove:!1,edit:!1,add:!1},defaultNode:{id:xn(),name:"开始",type:kn,config:{exec_type:"manual"},childNode:null}}),In[An]=()=>Dn({title:{name:"申请"},icon:{name:An},operateNode:{sort:1},defaultNode:{id:xn(),name:"申请",type:An,config:{domains:"",email:"",eabId:"",ca:"letsencrypt",proxy:"",end_day:30,provider:"",provider_id:"",algorithm:"RSA2048",skip_check:0,close_cname:0,max_wait:void 0,ignore_check:0},childNode:null}}),In[$n]=()=>Dn({title:{name:"上传"},icon:{name:$n},operateNode:{sort:2,onSupportNode:[jn]},defaultNode:{id:xn(),name:"上传",type:$n,config:{cert_id:"",cert:"",key:""},childNode:null}}),In[Rn]=()=>Dn({title:{name:"部署"},icon:{name:Rn},operateNode:{sort:3},defaultNode:{id:xn(),name:"部署",type:Rn,inputs:[],config:{provider:"",provider_id:"",skip:1,inputs:{fromNodeId:"",name:""}},childNode:null}}),In[On]=()=>Dn({title:{name:"通知"},icon:{name:On},operateNode:{sort:4},defaultNode:{id:xn(),name:"通知",type:On,config:{provider:"",provider_id:"",subject:"",body:"",skip:!1},childNode:null}}),In[Cn]=()=>Dn({title:{name:"并行分支"},icon:{name:Cn},operateNode:{sort:5,addBranch:!0},defaultNode:{id:xn(),name:"并行分支",type:Cn,conditionNodes:[{id:xn(),name:"分支1",type:Sn,config:{},childNode:null},{id:xn(),name:"分支2",type:Sn,config:{},childNode:null}]}}),In[Sn]=()=>Dn({title:{name:"分支1"},icon:{name:Sn},operateNode:{add:!1,onSupportNode:[jn]},defaultNode:{id:xn(),name:"分支1",type:Sn,icon:{name:Sn},config:{},childNode:null}}),In[jn]=()=>Dn({title:{name:"执行结果分支"},icon:{name:Cn},operateNode:{sort:7,onSupportNode:[jn]},defaultNode:{id:xn(),name:"执行结果分支",type:jn,conditionNodes:[{id:xn(),name:"若当前节点执行成功…",type:zn,icon:{name:"success"},config:{type:"success"},childNode:null},{id:xn(),name:"若当前节点执行失败…",type:zn,icon:{name:"error"},config:{type:"fail"},childNode:null}]}}),In[zn]=()=>Dn({title:{name:"执行结构条件"},icon:{name:Cn},operateNode:{add:!1,onSupportNode:[jn]},defaultNode:{id:xn(),name:"若前序节点执行失败…",type:zn,icon:{name:"SUCCESS"},config:{type:"SUCCESS"},childNode:null}});const En={name:"",childNode:{id:"start-1",name:"开始",type:"start",config:{exec_type:"auto",type:"day",hour:1,minute:0},childNode:{id:"apply-1",name:"申请证书",type:"apply",config:{domains:"",email:"",eabId:"",ca:"letsencrypt",proxy:"",end_day:30,provider:"",provider_id:"",algorithm:"RSA2048",skip_check:0},childNode:{id:"deploy-1",name:"部署",type:"deploy",inputs:[],config:{provider:"",provider_id:"",skip:1,inputs:{fromNodeId:"",name:""}},childNode:{id:"execute",name:"执行结果",type:"execute_result_branch",config:{fromNodeId:"deploy-1"},conditionNodes:[{id:"execute-success",name:"执行成功",type:"execute_result_condition",config:{fromNodeId:"",type:"success"}},{id:"execute-failure",name:"执行失败",type:"execute_result_condition",config:{fromNodeId:"",type:"fail"}}],childNode:{id:"notify-1",name:"通知任务",type:"notify",config:{provider:"",provider_id:"",subject:"",body:""}}}}}}},Fn=Q("flow-store",(()=>{const e=J({id:"",name:"",childNode:{id:"start-1",name:"开始",type:"start",config:{exec_type:"manual"},childNode:null}}),t=J(100),n=J(!1),a=J([]),l=J([]),o=J(null),r=J(null),i=J(null),s=J(null),u=J(null),c=d((()=>a.value.filter((e=>!l.value.includes(e.type))))),p=d((()=>s.value?_(e.value.childNode,s.value):null)),v=d((()=>p.value?p.value.name:te("t_6_1744861190121"))),f=()=>{const t=JSON.parse(JSON.stringify(En));t.name="工作流（"+((e,t="yyyy-MM-dd HH:mm:ss")=>{const n=Number(e)&&10===e.toString().length?new Date(1e3*Number(e)):new Date(e),a=vn(["yyyy","MM","dd","HH","mm","ss"],[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()]);return Pt(((e,t)=>{const n=a[t],l="yyyy"!==t&&n<10?`0${n}`:`${n}`;return e.replace(new RegExp(t,"g"),l)}),t,Y(a))})(new Date,"yyyy/MM/dd HH:mm:ss")+"）",e.value=t},_=(e,t)=>{var n;if(e.id===t)return e;if(e.childNode){const n=_(e.childNode,t);if(n)return n}if(null==(n=e.conditionNodes)?void 0:n.length)for(const a of e.conditionNodes){const e=_(a,t);if(e)return e}return null},h=t=>_(e.value.childNode,t),m=(e,t,n,a=null)=>{var l;if(e.id===t)return n(e,a),!0;if(e.childNode&&m(e.childNode,t,n,e))return!0;if(null==(l=e.conditionNodes)?void 0:l.length)for(const o of e.conditionNodes)if(m(o,t,n,e))return!0;return!1},y=(e,t)=>{if(!e)return null;const n=e[t];return n?"object"==typeof n&&null!==n?y(n,t):void 0:e};return{flowData:e,flowZoom:t,selectedNode:p,nodeTitle:v,selectedNodeId:s,isRefreshNode:u,advancedOptions:n,initFlowData:f,resetFlowData:()=>f(),getResultData:()=>hn({},e.value),updateFlowData:t=>{e.value=t},setflowZoom:e=>{1===e&&t.value>50?t.value-=10:2===e&&t.value<300&&(t.value+=10)},addNodeSelectList:a,nodeSelectList:c,excludeNodeSelectList:l,addNodeBtnRef:o,addNodeSelectRef:r,addNodeSelectPostion:i,getAddNodeSelect:()=>{a.value=[],Object.keys(In).forEach((e=>{var t;const n=In[e]();(null==(t=n.operateNode)?void 0:t.add)&&a.value.push({title:{name:n.title.name},type:e,icon:{...n.icon||{}},selected:!1})}))},addExcludeNodeSelectList:e=>{l.value=e},clearExcludeNodeSelectList:()=>{l.value=[]},setShowAddNodeSelect:(e,t)=>{var n;if(l.value=(null==(n=In[t]().operateNode)?void 0:n.onSupportNode)||[],e&&r.value&&o.value){const e=r.value.getBoundingClientRect().width,t=o.value.getBoundingClientRect().right,n=window.innerWidth;i.value=t+e>n?1:2}},addNode:(t,n,a={})=>{if(!h(t))return;let l=hn(In[n]().defaultNode,a);m(e.value.childNode,t,((e,a)=>{switch(n){case Sn:e.conditionNodes&&(l.name=`分支${e.conditionNodes.length+1}`,e.conditionNodes.push(l));break;case Cn:case jn:n===jn&&(l={...l,config:{fromNodeId:t}}),l.conditionNodes[0].childNode=e.childNode,e.childNode=l;break;default:e.childNode&&(l.childNode=e.childNode),e.childNode=l}}))},removeNode:(t,n=!1)=>{if(h(t))return m(e.value.childNode,t,((a,l)=>{var o,r,i;if(!l)return;const{type:s,conditionNodes:d}=l;(null==(o=a.childNode)?void 0:o.type)===jn&&(null==(r=a.childNode)?void 0:r.config)&&(a.childNode.config.fromNodeId=l.id);const u=[Sn,zn,Cn,jn];if(u.includes(a.type)||(null==(i=l.childNode)?void 0:i.id)!==t){if(u.includes(a.type))if(2===d.length)m(e.value.childNode,l.id,s===Cn?(e,n)=>{const a=d.findIndex((e=>e.id===t)),l=e.childNode;if(-1!==a&&n){n.childNode=d[0===a?1:0].childNode;y(n,"childNode").childNode=l}}:(e,t)=>{var n;t&&((null==(n=null==l?void 0:l.childNode)?void 0:n.id)?t.childNode=l.childNode:t.childNode=void 0)});else{const e=l.conditionNodes.findIndex((e=>e.id===t));if(-1!==e)if(n)l.conditionNodes.splice(e,1);else{const t=l.conditionNodes[e];(null==t?void 0:t.childNode)?l.conditionNodes[e]=t.childNode:l.conditionNodes.splice(e,1)}}}else n?l.childNode=void 0:a.childNode?l.childNode=a.childNode:l.childNode=void 0})),e.value},updateNodeConfig:(t,n)=>{if(h(t))return m(e.value.childNode,t,(e=>{e.config=n})),e.value},updateNode:(t,n,a=!0)=>{if(h(t))return m(e.value.childNode,t,(e=>{const t=hn(e,n,a);Object.keys(t).forEach((n=>{n in e&&(e[n]=t[n])}))})),e.value},findApplyUploadNodesUp:(t,n=["apply","upload"])=>{const a=[],l=(e,t,n=[])=>{var a;if(e.id===t)return n;if(e.childNode){const a=[...n,e],o=l(e.childNode,t,a);if(o)return o}if(null==(a=e.conditionNodes)?void 0:a.length)for(const o of e.conditionNodes){const a=[...n,e],r=l(o,t,a);if(r)return r}return null},o=l(e.value.childNode,t);return o&&o.forEach((e=>{n.includes(e.type)&&a.push({name:e.name,id:e.id})})),a},checkFlowNodeChild:e=>{var t;const n=h(e);return!!n&&!(!n.childNode&&!(null==(t=n.conditionNodes)?void 0:t.length))},checkFlowInlineNode:t=>{const n=h(t);n&&"condition"===n.type&&m(e.value.childNode,t,(e=>{e.conditionNodes&&(e.conditionNodes=e.conditionNodes.filter((e=>e.id!==t)))}))}}})),Mn=()=>{const e=Fn(),t=ee(e);return{...e,...t}};function Bn(e,t,n){const{isRefreshNode:a}=Mn(),{registerCompatValidator:l,validate:o,validationResult:r,unregisterValidator:i}=_n(),s=ne(["warningColor","primaryColor"]),u=d((()=>r.value.valid?"var(--n-primary-color)":"var(--n-warning-color)"));ae((()=>a.value),(n=>{Qe((()=>{l(e.node.id,t,e.node.config),o(e.node.id),a.value=null}),500)}),{immediate:!0}),le((()=>i(e.node.id)));return{validationResult:r,validColor:u,renderNode:()=>oe("div",{style:s.value,class:"text-[12px]"},[oe("div",{style:{color:u.value}},[n(r.value.valid,e.node.config)])])}}function qn(e){return{required:(t,n,a="change")=>({required:!0,message:n||te("t_3_1747817612697",{nodeName:e,field:t}),trigger:a}),domain:(e="input")=>({required:!0,trigger:e,validator:(e,t)=>t?!!Ye(t)||new Error(te("t_4_1747817613325")):new Error(te("t_0_1744958839535"))}),domainGroup:(e="input")=>({required:!0,trigger:e,validator:(e,t)=>t?!!Ge(t)||new Error(te("t_5_1747817619337")):new Error(te("t_0_1744958839535"))}),email:(e="input")=>({required:!0,trigger:e,validator:(e,t)=>t?!!Je(t)||new Error(te("t_7_1747817613773")):new Error(te("t_6_1747817644358"))}),custom:(e,t="change")=>({required:!0,trigger:t,validator:e})}}const Vn=qn(te("t_10_1747817611126")),Pn={domains:Vn.domainGroup(),email:Vn.email(),provider_id:Vn.required("provider_id",te("t_3_1745490735059")),end_day:Vn.custom(((e,t)=>!("number"!=typeof t||isNaN(t)||t<1)||new Error(te("t_9_1747990229640"))))};function Un(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!be(e)}const Tn=l({name:"ApplyNodeDrawer",props:{node:{type:Object,default:()=>({id:"",config:{domains:"",email:"",eabId:"",ca:"",proxy:"",provider_id:"",provider:"",end_day:30,name_server:"",skip_check:0,algorithm:"RSA2048",close_cname:0,max_wait:void 0,ignore_check:0}})}},setup(e){const{updateNodeConfig:t,advancedOptions:n,isRefreshNode:a}=Mn(),{confirm:l}=ge(),{useFormInput:o,useFormSelect:r,useFormMore:i,useFormHelp:s,useFormSwitch:u}=re(),c=J(yn(e.node.config)),p=J([]),v=J([]),f=J(!1),_=J(!1),h=J(!1),m=J(null),y=async()=>{f.value=!0;try{const{data:e}=await at({ca:"",p:1,limit:1e3}).fetch(),t=new Set,n=[];["letsencrypt","buypass","zerossl"].forEach((e=>{if(!t.has(e)){t.add(e);const a=Object.values(it).find((t=>t.type===e));n.push({label:a?a.name:e.toUpperCase(),value:e,icon:`cert-${e}`})}})),null==e||e.forEach((e=>{if(e.ca&&!t.has(e.ca)){t.add(e.ca);const a=Object.values(it).find((t=>t.type===e.ca));n.push({label:a?a.name:e.ca.toUpperCase(),value:e.ca,icon:a?`cert-${e.ca}`:"cert-custom"})}})),p.value=n}catch(e){}finally{f.value=!1}},g=async e=>{if(e){_.value=!0;try{const{data:t}=await at({ca:e,p:1,limit:1e3}).fetch();v.value=(null==t?void 0:t.map((e=>e.email)).filter(Boolean))||[],v.value.length||(c.value.email=""),v.value.length>0&&v.value[0]&&(c.value.email=v.value[0])}catch(t){}finally{_.value=!1}}},b=e=>{c.value.ca=e,g(e)},w=()=>{window.open("/auto-deploy?type=caManage","_blank")},N=e=>oe(Xe,{align:"center"},{default:()=>[oe(rt,{icon:e.icon,size:"2rem"},null),oe(Ke,null,{default:()=>[e.label]})]}),x=({option:e})=>{let t;return oe(Xe,{align:"center"},{default:()=>[e.label?N(e):oe(Ke,{class:"text-[#aaa]"},Un(t=te("t_0_1747990228780"))?t:{default:()=>[t]})]})},k=(e,t)=>t.label.toLowerCase().includes(e.toLowerCase()),C=()=>{v.value.length>0&&(h.value=!0)},S=()=>{setTimeout((()=>{h.value=!1}),200)},j=e=>{var t;c.value.email=e,h.value=!1,null==(t=m.value)||t.blur()},z=d((()=>v.value.map((e=>({label:e,key:e}))))),$=d((()=>["letsencrypt","buypass","zerossl"].includes(c.value.ca))),O=d((()=>[o(te("t_17_1745227838561"),"domains",{placeholder:te("t_0_1745735774005"),allowInput:nt,onInput:e=>{c.value.domains=e.replace(/，/g,",").replace(/;/g,",")}}),{type:"custom",render:()=>oe(tt,ie({type:"dns",path:"provider_id",value:c.value.provider_id,valueType:"value",isAddMode:!0},{"onUpdate:value":e=>{c.value.provider_id=e.value,c.value.provider=e.type}}),null)},{type:"custom",render:()=>{let e,t;return oe(Ve,{show:f.value},{default:()=>[oe(se,{cols:24},{default:()=>[oe(de,{span:13,label:te("t_3_1750399513606"),path:"ca",showRequireMark:!0},{default:()=>[oe(ue,{value:c.value.ca,options:p.value,renderLabel:N,renderTag:x,filterable:!0,filter:k,loading:f.value,placeholder:te("t_0_1747990228780"),onUpdateValue:b,class:"flex-1 w-full"},{empty:()=>oe("span",{class:"text-[1.4rem]"},[te("t_2_1747990228008")])})]}),oe(de,{span:11},{default:()=>[oe(ce,{class:"mx-[8px]",onClick:w},Un(e=te("t_4_1747903685371"))?e:{default:()=>[e]}),oe(ce,{onClick:y,loading:f.value},Un(t=te("t_0_1746497662220"))?t:{default:()=>[t]})]})]})]})}},{type:"custom",render:()=>oe(pe,{label:te("t_68_1745289354676"),path:"email"},{default:()=>[$.value?oe(ve,{trigger:"manual",show:h.value,options:z.value,onSelect:j,placement:"bottom-start",style:"width: 100%"},{default:()=>[oe(fe,{ref:m,value:c.value.email,"onUpdate:value":e=>c.value.email=e,placeholder:te("t_2_1748052862259"),clearable:!0,loading:_.value,onFocus:C,onBlur:S,class:"w-full"},null)]}):oe(ue,{value:c.value.email,"onUpdate:value":e=>c.value.email=e,options:v.value.map((e=>({label:e,value:e}))),placeholder:te("t_2_1748052862259"),clearable:!0,filterable:!0,loading:_.value,class:"w-full"},null)]})},{type:"custom",render:()=>oe(pe,{label:te("t_4_1747990227956"),path:"end_day"},{default:()=>[oe("div",{class:"flex items-center"},[oe("span",{class:"text-[1.4rem] mr-[1.2rem]"},[te("t_5_1747990228592")]),oe(_e,{value:c.value.end_day,"onUpdate:value":e=>c.value.end_day=e,showButton:!1,min:1,class:"w-[120px]"},null),oe("span",{class:"text-[1.4rem] ml-[1.2rem]"},[te("t_6_1747990228465")])])]})},i(n),...n.value?[r(te("t_0_1747647014927"),"algorithm",[{label:"RSA2048",value:"RSA2048"},{label:"RSA3072",value:"RSA3072"},{label:"RSA4096",value:"RSA4096"},{label:"RSA8192",value:"RSA8192"},{label:"EC256",value:"EC256"},{label:"EC384",value:"EC384"}],{},{showRequireMark:!1}),o(te("t_7_1747990227761"),"proxy",{placeholder:te("t_8_1747990235316"),allowInput:nt},{showRequireMark:!1}),u(te("t_2_1749204567193"),"close_cname",{checkedValue:1,uncheckedValue:0},{showRequireMark:!1}),u(te("t_2_1747106957037"),"skip_check",{checkedValue:1,uncheckedValue:0},{showRequireMark:!1}),...0===c.value.skip_check?[o(te("t_0_1747106957037"),"name_server",{placeholder:te("t_1_1747106961747"),allowInput:nt,onInput:e=>{c.value.name_server=e.replace(/，/g,",").replace(/;/g,",")}},{showRequireMark:!1}),{type:"custom",render:()=>oe(pe,{label:te("t_0_1749263105073"),path:"max_wait"},{default:()=>[oe(_e,{value:c.value.max_wait,"onUpdate:value":e=>c.value.max_wait=e,showButton:!1,min:1,class:"w-full",placeholder:te("t_1_1749263104936")},null)]})},{type:"custom",render:()=>oe(pe,{label:te("t_2_1749263103765"),path:"ignore_check"},{default:()=>[oe("div",{class:"flex items-center"},[oe("span",{class:"text-[1.4rem] mr-[1.2rem]"},[te("t_3_1749263104237")]),oe(he,{value:c.value.ignore_check,"onUpdate:value":e=>c.value.ignore_check=e,checkedValue:1,uncheckedValue:0,class:"mx-[.5rem]"},{checked:()=>te("t_4_1749263101853"),unchecked:()=>te("t_5_1749263101934")}),oe("span",{class:"text-[1.4rem] ml-[1.2rem]"},[te("t_6_1749263103891")])])]})}]:[]]:[],s([{content:te("t_0_1747040228657")},{content:te("t_1_1747040226143")}])])),{component:A,data:R,example:I}=me({defaultValue:c,config:O,rules:Pn});return ae((()=>c.value.ca),(async e=>{e?await g(e):(v.value=[],c.value.email="",h.value=!1)})),ae((()=>v.value),(e=>{h.value&&0===e.length&&(h.value=!1)})),ye((async()=>{n.value=!1,await y(),c.value.ca&&await g(c.value.ca)})),l((async n=>{var l;try{await(null==(l=I.value)?void 0:l.validate()),t(e.node.id,R.value),a.value=e.node.id,n()}catch(o){}})),()=>oe("div",{class:"apply-node-drawer"},[oe(A,{labelPlacement:"top"},null)])}});function Ln(){return{handleNodeClick:(e,t,n,a="60rem",l=!0)=>{var o;we({title:`${null==(o=e.value)?void 0:o.name}${n||te("t_1_1745490731990")}`,area:a,component:()=>t(e.value),confirmText:te("t_2_1744861190040"),footer:l})}}}const Hn=l({name:"ApplyNode",props:{node:{type:Object,default:()=>({id:"",config:{}})}},setup(e,{expose:t}){const{renderNode:n}=Bn(e,Pn,((e,t)=>e?te("t_9_1747817611448")+(null==t?void 0:t.domains):te("t_9_1745735765287"))),{handleNodeClick:a}=Ln();return t({handleNodeClick:e=>a(e,(e=>oe(Tn,{node:e},null)))}),n}}),Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),Wn=qn(te("t_11_1747817612051")),Jn={provider:Wn.required("provider",te("t_0_1746858920894")),provider_id:Wn.custom(((e,t)=>!!t||new Error(te("t_0_1746858920894")))),"inputs.fromNodeId":Wn.required("inputs.fromNodeId",te("t_3_1745748298161")),certPath:Wn.required("certPath",te("t_30_1746667591892"),"input"),keyPath:Wn.required("keyPath",te("t_31_1746667593074"),"input"),siteName:Wn.custom(((e,t)=>{if(!t)return new Error(te("t_1_1747296175494"));if("string"==typeof t){if(!t.trim())return new Error(te("t_1_1747296175494"))}else{if(!Array.isArray(t))return new Error(te("t_1_1747296175494"));if(0===t.length)return new Error(te("t_1_1747296175494"))}return!0}),"input"),site_id:Wn.required("site_id",te("t_24_1745735766826"),"input"),domain:Wn.custom(((e,t)=>!!t||new Error(te("t_0_1744958839535"))),"input"),region:Wn.required("region",te("t_25_1745735766651"),"input"),bucket:Wn.required("bucket",te("t_26_1745735767144"),"input"),action:Wn.required("action","请选择插件方法","select")};const Gn="all",Yn={};function Kn(e){const t=e.split("-")[0];return Yn[t]||Gn}function Xn(){const e=[];return Object.keys(st).filter((e=>{const t=st[e];return Array.isArray(t.type)&&t.type.includes("host")})).forEach((t=>{const n=st[t],{icon:a}=n;if("hostRelated"in n&&n.hostRelated){const l=n.hostRelated;"default"in l&&l.default&&"name"in l.default&&e.push({label:l.default.name,value:t,category:Kn(t),icon:a}),Object.entries(l).forEach((([n,l])=>{if("default"!==n&&l&&"object"==typeof l&&"name"in l){const o=`${t}-${n}`;e.push({label:l.name,value:o,category:Kn(t),icon:a})}}))}})),e.sort(((e,t)=>{var n,a,l,o;const r=((null==(n=e.value)?void 0:n.toString())||"").split("-")[0],i=((null==(a=t.value)?void 0:a.toString())||"").split("-")[0],s=r?st[r]:void 0,d=i?st[i]:void 0,u=s&&"object"==typeof s&&"sort"in s&&s.sort||999,c=d&&"object"==typeof d&&"sort"in d&&d.sort||999;if(u!==c)return u-c;const p=(null==(l=e.label)?void 0:l.toString())||"",v=(null==(o=t.label)?void 0:o.toString())||"";return p.localeCompare(v)}))}function Qn(e){if(e===Gn)return te("t_7_1747271292060");for(const[t,n]of Object.entries(st))if(n.icon===e)return"本地部署"===n.name?te("t_0_1747969933657"):n.name;return""}Object.entries(st).forEach((([e,t])=>{var n;(null==(n=t.type)?void 0:n.includes("host"))&&t.icon&&(Yn[e]=t.icon)}));const ea={configContainer:"_configContainer_11qz3_4",formContainer:"_formContainer_11qz3_9",leftPanel:"_leftPanel_11qz3_14",rightPanel:"_rightPanel_11qz3_21",searchBar:"_searchBar_11qz3_26",cardContainer:"_cardContainer_11qz3_31",optionCard:"_optionCard_11qz3_37",optionCardSelected:"_optionCardSelected_11qz3_42",cardContent:"_cardContent_11qz3_68",icon:"_icon_11qz3_73",iconSelected:"_iconSelected_11qz3_77",footer:"_footer_11qz3_82",footerButton:"_footerButton_11qz3_86"};function ta(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!be(e)}const na=["btpanel-site","1panel-site"],aa=["btpanel-site"],la=l({name:"DeployNodeDrawer",props:{node:{type:Object,default:()=>({id:"",inputs:[],config:{provider:"",provider_id:"",inputs:{fromNodeId:"",name:""},skip:1}})}},setup(e){const{updateNode:t,updateNodeConfig:n,findApplyUploadNodesUp:a,isRefreshNode:l}=Mn(),o=ne(["primaryColor","borderColor"]),{handleError:r}=Pe(),i=Ne();xe();const s=ke(),u=function(){const{useFormInput:e,useFormTextarea:t,useFormSelect:n}=re();return{input:(t,n,a={},l={})=>e(t,n,{placeholder:a.placeholder||te("t_0_1747817614953")+t,allowInput:nt,...a},l),textarea:(e,n,a={},l={})=>t(e,n,{placeholder:a.placeholder||te("t_0_1747817614953")+e,rows:a.rows||3,...a},{showRequireMark:!1,...l}),select:(e,t,a,l={},o={})=>n(e,t,a,l,o),switch(e,t,n,a={}){const l=a.checkedText||te("t_1_1747817639034"),o=a.uncheckedText||te("t_2_1747817610671"),r=a.description||"";return{type:"custom",render:()=>oe(pe,{label:e,path:t},{default:()=>{return[r&&oe(Ke,null,(e=r,"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!be(e)?r:{default:()=>[r]})),oe(he,{value:n.value[t],"onUpdate:value":e=>n.value[t]=e,checkedValue:1,uncheckedValue:0,class:"mx-[.5rem]"},{checked:()=>l,unchecked:()=>o})];var e}})}},custom:e=>({type:"custom",render:e}),sshDeploy(){return[this.input(te("t_1_1747280813656"),"certPath",{placeholder:te("t_30_1746667591892")}),this.input(te("t_2_1747280811593"),"keyPath",{placeholder:te("t_31_1746667593074")}),this.textarea(te("t_3_1747280812067"),"beforeCmd",{placeholder:te("t_21_1745735769154"),rows:2}),this.textarea(te("t_4_1747280811462"),"afterCmd",{placeholder:te("t_22_1745735767366"),rows:2})]},siteDeploy(){return[this.input(te("t_0_1747296173751"),"siteName",{placeholder:te("t_0_1748589752275")})]},onePanelSiteDeploy(){return[this.input(te("t_6_1747280809615"),"site_id",{placeholder:te("t_24_1745735766826")})]},cdnDeploy(){return[this.input(te("t_17_1745227838561"),"domain",{placeholder:te("t_0_1744958839535")})]},wafDeploy(){return[this.input(te("t_17_1745227838561"),"domain",{placeholder:te("t_0_1744958839535")}),this.select(te("t_7_1747280808936"),"region",[{label:"cn-hangzhou",value:"cn-hangzhou"},{label:"ap-southeast-1",value:"ap-southeast-1"}],{placeholder:te("t_25_1745735766651"),defaultValue:"cn-hangzhou"})]},storageDeploy(){return[this.input(te("t_17_1745227838561"),"domain",{placeholder:te("t_0_1744958839535")}),this.input(te("t_7_1747280808936"),"region",{placeholder:te("t_25_1745735766651")}),this.input(te("t_8_1747280809382"),"bucket",{placeholder:te("t_26_1745735767144")})]},aliyunEsaDeploy(){return[this.input("站点ID","site_id",{placeholder:"请输入ESA站点ID"})]},skipOption(e){return this.switch(te("t_9_1747280810169"),"skip",e,{checkedText:te("t_11_1747280809178"),uncheckedText:te("t_12_1747280809893"),description:te("t_10_1747280816952")})}}}(),c=Xn(),p=function(){const e=Array.from(new Set(Xn().map((e=>e.category)).filter(Boolean)));if(e.includes(Gn)){const t=e.indexOf(Gn);e.splice(t,1),e.unshift(Gn)}else e.unshift(Gn);return e.sort(((e,t)=>{var n,a;if(e===Gn)return-1;if(t===Gn)return 1;const l=Object.entries(st).find((([t,n])=>n.icon===e)),o=Object.entries(st).find((([e,n])=>n.icon===t));return((null==(n=null==l?void 0:l[1])?void 0:n.sort)||999)-((null==(a=null==o?void 0:o[1])?void 0:a.sort)||999)})).map((e=>({name:e,tab:Qn(e)})))}(),v=J([]),f=J([]),_=J(!1);J([]);const h=J([]),m=J(!1),y=J(1),g=J(!0),b=J("process"),w=J(Gn),N=J(""),x=J(""),k=J(yn(e.node.config)),C=J(function(){var e,t;const n=st.localhost;return n&&Array.isArray(n.type)&&n.type.includes("host")?[{label:(null==(t=null==(e=n.hostRelated)?void 0:e.default)?void 0:t.name)||te("t_6_1747271296994"),value:"localhost"}]:[{label:te("t_6_1747271296994"),value:"localhost"}]}()),S=d((()=>{var e;return k.value.provider?te("t_4_1746858917773")+"："+(null==(e=c.find((e=>e.value===k.value.provider)))?void 0:e.label):te("t_19_1745735766810")})),j=d((()=>function(e,t,n){let a=[...e];if(t!==Gn&&(a=a.filter((e=>e.category===t))),n){const e=n.toLowerCase();a=a.filter((t=>{var n,a;return((null==(n=t.label)?void 0:n.toString().toLowerCase())||"").includes(e)||((null==(a=t.value)?void 0:a.toString().toLowerCase())||"").includes(e)}))}return a}(c,w.value,N.value))),z=d((()=>{const e=[];switch("localhost"!==k.value.provider?e.push(u.custom((()=>{const e={type:k.value.provider,path:"provider_id",value:k.value.provider_id,valueType:"value",isAddMode:!0,"onUpdate:value":e=>{""!==e.value&&""!==k.value.provider_id&&k.value.provider_id!==e.value&&na.includes(k.value.provider)&&(k.value.siteName=aa.includes(k.value.provider)?[]:""),k.value.provider_id=e.value,k.value.type=e.type,k.value.provider_data=(null==e?void 0:e.data)||""}};return oe(tt,e,null)}))):e.push(u.select(te("t_0_1746754500246"),"provider",C.value)),e.push(u.select(te("t_1_1745748290291"),"inputs.fromNodeId",v.value,{onUpdateValue:(e,t)=>{k.value.inputs.fromNodeId=e,k.value.inputs.name=null==t?void 0:t.label}})),k.value.provider){case"localhost":case"ssh":e.push(...u.sshDeploy());break;case"btpanel-site":case"1panel-site":e.push(u.select(te("t_0_1747296173751"),"1panel-site"===k.value.provider?"site_id":"siteName",f.value,{placeholder:aa.includes(k.value.provider)?te("t_10_1747990232207"):te("t_0_1748586248783"),multiple:aa.includes(k.value.provider),filterable:!0,remote:!0,clearable:!0,loading:_.value,onSearch:$}));break;case"btwaf-site":case"btpanel-dockersite":case"btpanel-singlesite":case"safeline-site":e.push(...u.siteDeploy());break;case"tencentcloud-cdn":case"tencentcloud-waf":case"tencentcloud-teo":case"aliyun-cdn":case"baidu-cdn":case"qiniu-cdn":case"qiniu-oss":case"huaweicloud-cdn":case"doge-cdn":e.push(...u.cdnDeploy());break;case"volcengine-cdn":case"volcengine-dcdn":e.push(u.input(te("t_17_1745227838561"),"domain",{placeholder:te("t_0_1744958839535")}),u.input(te("t_7_1747280808936"),"region",{placeholder:te("t_25_1745735766651")}));break;case"aliyun-waf":e.push(...u.wafDeploy());break;case"tencentcloud-cos":case"aliyun-oss":e.push(...u.storageDeploy());break;case"aliyun-esa":e.push(...u.aliyunEsaDeploy());break;case"plugin":e.push(u.select("插件方法","action",h.value,{placeholder:"请选择插件方法",filterable:!0,clearable:!0,loading:m.value,onUpdateValue:(e,t)=>{k.value.action=e,x.value=O((null==t?void 0:t.params)||{})}}),{type:"custom",render:()=>oe(pe,{label:"自定义参数",path:"params"},{default:()=>[oe(fe,{type:"textarea",value:k.value.params,"onUpdate:value":e=>k.value.params=e,placeholder:x.value,rows:4},null)],label:()=>oe("div",null,[oe(Ke,null,{default:()=>[Ce("自定义参数")]}),oe(Se,null,{default:()=>[x.value],trigger:()=>oe("span",{class:"inline-flex ml-2 -mt-1 cursor-pointer text-base rounded-full w-[14px] h-[14px] justify-center items-center  text-orange-600 border border-orange-600"},[Ce("?")])})])})})}return e.push(u.skipOption(k)),e}));ae((()=>k.value.provider_id),((e,t)=>{$(""),"plugin"===k.value.provider&&e&&e!==t&&A()}));const $=et((async e=>{if(na.includes(k.value.provider)&&k.value.provider_id)try{_.value=!0;const{data:t}=await ot({id:k.value.provider_id.toString(),type:k.value.provider,search:e,limit:"100"}).fetch();f.value=null==t?void 0:t.map((({siteName:e,id:t})=>({label:e,value:t||e})))}catch(t){r(t),f.value=[]}finally{_.value=!1}}),1e3),O=e=>"请输入JSON格式的参数，例如: "+JSON.stringify(e||{}),A=async()=>{var e,t;if(k.value.provider_id)try{m.value=!0;let n="";if(null==(t=null==(e=k.value.provider_data)?void 0:e.data)?void 0:t.config){const e=JSON.parse(k.value.provider_data.data.config||"{}");n=e.name}else k.value.type&&(n=k.value.type);if(n){const{data:e}=await lt().fetch(),t=null==e?void 0:e.find((e=>e.name===n)),a=(null==t?void 0:t.actions)||[];if(h.value=a.map((e=>({label:`${e.description}`,value:e.name,params:e.params}))),k.value.action){const e=a.find((e=>e.name===k.value.action));e&&(x.value=O(e.params||{}))}else if(a.length>0){const e=a[0];k.value.action=null==e?void 0:e.name,x.value=O((null==e?void 0:e.params)||{})}}}catch(n){r(n),h.value=[]}finally{m.value=!1}},R=async()=>{var t,n,l;if(!k.value.provider)return i.error(te("t_0_1746858920894"));"localhost"===k.value.provider&&delete k.value.provider_id,v.value=a(e.node.id).map((e=>({label:e.name,value:e.id}))),v.value.length?(null==(t=k.value.inputs)?void 0:t.fromNodeId)||(k.value.inputs={name:(null==(n=v.value[0])?void 0:n.label)||"",fromNodeId:(null==(l=v.value[0])?void 0:l.value)||""}):i.warning(te("t_3_1745748298161")),y.value++,g.value=!1},{component:I,example:D}=me({config:z,defaultValue:k,rules:Jn}),E=()=>{y.value--,g.value=!0,k.value={},k.value.provider_id="",k.value.provider=""},F=async()=>{var a;try{await(null==(a=D.value)?void 0:a.validate());const o=yn(k.value);aa.includes(o.provider)&&o.siteName&&Array.isArray(o.siteName)&&(o.siteName=o.siteName.join(","));const r=o.inputs;n(e.node.id,{...o}),t(e.node.id,{inputs:[r]},!1),l.value=e.node.id,s()}catch(o){r(o)}};return ye((()=>{k.value.provider&&(e.node.inputs&&(k.value.inputs=e.node.inputs[0]),na.includes(k.value.provider)&&("btpanel-site"===k.value.provider&&(k.value.siteName=k.value.siteName.split(",").filter(Boolean)),$("")),"plugin"===k.value.provider&&A(),R())})),()=>{let e,t,n;return oe("div",{class:ea.container,style:o.value},[oe(Nt,{size:"small",current:y.value,status:b.value},{default:()=>[oe(xt,{title:te("t_28_1745735766626"),description:S.value},null),oe(xt,{title:te("t_29_1745735768933"),description:te("t_2_1745738969878")},null)]}),1===y.value&&oe("div",{class:ea.configContainer},[oe("div",{class:ea.leftPanel},[oe(ut,{type:"bar",placement:"left",value:w.value,class:"h-[45rem]",onUpdateValue:e=>w.value=e},ta(e=p.map((e=>oe(ct,{key:e.name,name:e.name,tab:e.tab},null))))?e:{default:()=>[e]})]),oe("div",{class:ea.rightPanel},[oe("div",{class:ea.searchBar},[oe(fe,{value:N.value,onUpdateValue:e=>N.value=e,placeholder:te("t_14_1747280811231"),clearable:!0},{suffix:()=>oe("div",{class:"flex items-center"},[oe($t,{class:"text-[var(--text-color-3)] w-[1.6rem] cursor-pointer font-bold"},null)])})]),oe(je,{class:"!my-[1rem]"},null),oe("div",{class:ea.cardContainer},[j.value.map((e=>{var t;return oe("div",{key:e.value,class:`${ea.optionCard} ${k.value.provider===e.value?ea.optionCardSelected:""}`,onClick:()=>{k.value.provider=e.value}},[oe("div",{class:ea.cardContent},[oe(rt,{icon:`resources-${null==(t=e.icon)?void 0:t.replace(/-[a-z]+$/,"")}`,size:"2rem",class:`${ea.icon} ${k.value.provider===e.value?ea.iconSelected:""}`},null),oe(Ke,{type:k.value.provider===e.value?"primary":"default",class:"text-center"},{default:()=>[e.label]})])])}))])])]),2===y.value&&oe(ze,{class:ea.formContainer},{default:()=>[oe(I,{labelPlacement:"top"},null)]}),oe("div",{class:ea.footer},[oe(ce,{class:ea.footerButton,onClick:s},ta(t=te("t_4_1744870861589"))?t:{default:()=>[t]}),oe(Se,{trigger:"hover",disabled:!!k.value.provider},{default:()=>[g.value?te("t_4_1745765868807"):null],trigger:()=>oe(ce,{type:g.value?"primary":"default",class:ea.footerButton,disabled:!k.value.provider,onClick:g.value?R:E},{default:()=>[g.value?te("t_27_1745735764546"):te("t_0_1745738961258")]})}),!g.value&&oe(ce,{type:"primary",onClick:F},ta(n=te("t_1_1745738963744"))?n:{default:()=>[n]})])])}}}),oa=l({name:"DeployNode",props:{node:{type:Object,default:()=>({id:"",inputs:{},config:{}})}},setup(e,{expose:t}){const{renderNode:n}=Bn(e,Jn,((e,t)=>t.provider?oe(dt,{icon:t.provider,type:e?"success":"warning"},null):te("t_9_1745735765287"))),{handleNodeClick:a}=Ln();return t({handleNodeClick:e=>{a(e,(e=>oe(la,{node:e},null)),!1,"68rem",!1)}}),n}}),ra=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),ia={subject:{trigger:"input",required:!0,validator:(e,t)=>new Promise(((e,n)=>{t?t.length>100?n(new Error(te("t_3_1745887835089")+"长度不能超过100个字符")):e():n(new Error(te("t_3_1745887835089")))}))},body:{trigger:"input",required:!0,validator:(e,t)=>new Promise(((e,n)=>{t?t.length>1e3?n(new Error(te("t_4_1745887835265")+"长度不能超过1000个字符")):e():n(new Error(te("t_4_1745887835265")))}))},provider_id:{trigger:"change",type:"string",required:!0,validator:(e,t)=>new Promise(((e,n)=>{t?e():n(new Error(te("t_0_1745887835267")))}))}},sa=l({name:"NotifyNodeDrawer",props:{node:{type:Object,default:()=>({id:"",config:{provider:"",provider_id:"",subject:"",body:"",skip:!1}})}},setup(e){const{updateNodeConfig:t,isRefreshNode:n}=Mn(),{useFormInput:a,useFormTextarea:l,useFormCustom:o}=re(),{confirm:r}=ge(),{handleError:i}=Pe(),s=J(yn(e.node.config)),u=d({get:()=>!s.value.skip,set:e=>{s.value.skip=!e}}),c=[a(te("t_0_1745920566646"),"subject",{placeholder:te("t_3_1745887835089"),allowInput:nt}),l(te("t_1_1745920567200"),"body",{placeholder:te("t_4_1745887835265"),rows:4,allowInput:nt}),o((()=>oe(pt,{path:"provider_id",value:s.value.provider_id,isAddMode:!0,"onUpdate:value":e=>{s.value.provider_id=e.value,s.value.provider=e.type}},null))),o((()=>oe(pe,{label:te("t_2_1750320237611"),path:"skip"},{default:()=>[oe(Ke,null,{default:()=>[Ce("当结果来源为跳过状态时")]}),oe(he,{value:u.value,"onUpdate:value":e=>u.value=e,checkedValue:!0,uncheckedValue:!1,class:"mx-[.5rem]"},{checked:()=>te("t_3_1750320237991"),unchecked:()=>te("t_11_1747280809178")})]})))],{component:p,data:v,example:f}=me({defaultValue:s,config:c,rules:ia});return r((async a=>{var l;try{await(null==(l=f.value)?void 0:l.validate()),t(e.node.id,v.value),n.value=e.node.id,a()}catch(o){i(o)}})),()=>oe("div",{class:"notify-node-drawer"},[oe(p,{labelPlacement:"top"},null)])}}),da=l({name:"NotifyNode",props:{node:{type:Object,default:()=>({id:"",config:{}})}},setup(e,{expose:t}){const{renderNode:n}=Bn(e,ia,((e,t)=>t.provider?oe(dt,{icon:t.provider,type:e?"success":"warning"},null):te("t_9_1745735765287"))),{handleNodeClick:a}=Ln();return t({handleNodeClick:e=>{a(e,(e=>oe(sa,{node:e},null)))}}),n}}),ua=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),ca={exec_type:{required:!0,message:te("t_31_1745735767891"),trigger:"change"},type:{required:!0,message:te("t_32_1745735767156"),trigger:"change"},week:{required:!0,message:te("t_33_1745735766532"),trigger:"input",type:"number"},month:{required:!0,message:te("t_33_1745735766532"),trigger:"input",type:"number"},hour:{required:!0,message:te("t_33_1745735766532"),trigger:"input",type:"number"},minute:{required:!0,message:te("t_33_1745735766532"),trigger:"input",type:"number"}};function pa(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!be(e)}const va=l({name:"StartNodeDrawer",props:{node:{type:Object,default:()=>({id:"",config:{exec_type:"auto"}})}},setup(e){const{updateNodeConfig:t,isRefreshNode:n,flowData:a}=Mn(),{confirm:l}=ge(),{handleError:o}=Pe(),{useFormRadio:r,useFormCustom:i}=re(),s=J(yn(e.node.config)),u=[{label:te("t_2_1744875938555"),value:"day"},{label:te("t_0_1744942117992"),value:"week"},{label:te("t_3_1744875938310"),value:"month"}],c=[{label:te("t_1_1744942116527"),value:1},{label:te("t_2_1744942117890"),value:2},{label:te("t_3_1744942117885"),value:3},{label:te("t_4_1744942117738"),value:4},{label:te("t_5_1744942117167"),value:5},{label:te("t_6_1744942117815"),value:6},{label:te("t_7_1744942117862"),value:0}],p={day:{exec_type:"auto",type:"day",hour:1,minute:0},week:{exec_type:"auto",type:"week",hour:1,minute:0,week:1},month:{exec_type:"auto",type:"month",hour:1,minute:0,month:1}},v=(e,t,n,a)=>oe(Oe,null,{default:()=>[oe(_e,{value:e,onUpdateValue:e=>{null!==e&&t(e)},max:n,min:0,showButton:!1,class:"w-full"},null),oe(mt,null,pa(a)?a:{default:()=>[a]})]}),f=d((()=>{const e=[];return"auto"===s.value.exec_type&&e.push(i((()=>{let e,t;return oe(se,{cols:24,xGap:24},{default:()=>[oe(de,{label:te("t_2_1744879616413"),span:8,showRequireMark:!0,path:"type"},{default:()=>[oe(ue,{class:"w-full",options:u,value:s.value.type,"onUpdate:value":e=>s.value.type=e,onUpdateValue:e=>{e&&(s.value.type=e,g(e))}},null)]}),"day"!==s.value.type&&oe(de,{span:5,path:"week"===s.value.type?"week":"month"},{default:()=>["week"===s.value.type?oe(ue,{value:s.value.week,onUpdateValue:e=>{s.value.week=e},options:c},null):v(s.value.month||0,(e=>s.value.month=e),31,te("t_29_1744958838904"))]}),oe(de,{span:"day"===s.value.type?7:5,path:"hour"},pa(e=v(s.value.hour||0,(e=>s.value.hour=e),23,te("t_5_1744879615277")))?e:{default:()=>[e]}),oe(de,{span:"day"===s.value.type?7:5,path:"minute"},pa(t=v(s.value.minute||0,(e=>s.value.minute=e),59,te("t_3_1744879615723")))?t:{default:()=>[t]})]})}))),[r(te("t_30_1745735764748"),"exec_type",[{label:te("t_4_1744875940750"),value:"auto"},{label:te("t_5_1744875940010"),value:"manual"}]),...e]})),{component:_,data:h,example:m}=me({defaultValue:s,config:f,rules:ca}),y=e=>{let t={...e};const n=Math.floor(4*Math.random())+1,a=5*Math.floor(12*Math.random());t={...t,hour:n,minute:a},s.value=t},g=e=>{y(p[e])};return ae((()=>s.value.exec_type),(e=>{"auto"===e?y(p.day):"manual"===e&&y({exec_type:"manual"})})),ae((()=>s.value.type),(e=>{e&&"auto"===s.value.exec_type&&y(p[e])})),l((async a=>{var l;try{await(null==(l=m.value)?void 0:l.validate()),t(e.node.id,h.value),n.value=e.node.id,a()}catch(r){o(r)}})),ye((()=>{$e(a.value.id)&&(g("day"),t(e.node.id,s.value))})),()=>oe("div",{class:"apply-node-drawer"},[oe(_,{labelPlacement:"top"},null)])}}),fa=l({name:"StartNode",props:{node:{type:Object,default:()=>({id:"",config:{}})}},setup(e,{expose:t}){const{renderNode:n}=Bn(e,ca,((e,t)=>e?"auto"===t.exec_type?te("t_4_1744875940750"):te("t_5_1744875940010"):"未配置")),{handleNodeClick:a}=Ln();return t({handleNodeClick:e=>{a(e,(e=>oe(va,{node:e},null)))}}),n}}),_a=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),ha=qn(te("t_12_1747817611391")),ma={key:ha.required("key",te("t_38_1745735769521"),["input","blur","focus"]),cert:ha.required("cert",te("t_40_1745735815317"),["input","blur","focus"])},ya=l({name:"UploadNodeDrawer",props:{node:{type:Object,default:()=>({id:"",config:{cert_id:"",cert:"",key:""}})}},setup(e){const{updateNodeConfig:t,isRefreshNode:n}=Mn(),{useFormTextarea:a,useFormSelect:l,useFormHelp:o}=re(),r=J(yn(e.node.config)),{confirm:i,options:s}=ge(),{handleError:u}=Pe(),c=s(),p=J([{cert:"",key:"",label:"自定义证书",value:""}]),v=d((()=>""!==r.value.cert_id)),f=d((()=>({readonly:v.value,allowInput:nt,rows:6}))),_=d((()=>[l(te("t_0_1747110184700"),"cert_id",p.value,{filterable:!0,onUpdateValue:e=>{r.value.cert_id=e;const t=g(e);t&&(r.value.cert=t.cert,r.value.key=t.key)}},{showRequireMark:!1}),a(te("t_34_1745735771147"),"cert",{placeholder:te("t_35_1745735781545"),...f.value}),a(te("t_36_1745735769443"),"key",{placeholder:te("t_37_1745735779980"),...f.value}),o([{content:te("t_1_1747110191587")},{content:te("t_2_1747110193465")}])])),{component:h,data:m,example:y}=me({defaultValue:r,config:_,rules:ma}),g=e=>p.value.find((t=>t.value===e));return ye((async()=>{await(async()=>{try{const{data:e}=await ft({p:1,limit:100}).fetch();p.value=(null==e?void 0:e.map((e=>({cert:e.cert,key:e.key,label:e.domains+" 【 "+e.issuer+" 】",value:e.sha256}))))||[],p.value.unshift({cert:"",key:"",label:"自定义证书",value:""})}catch(e){p.value=[],u(e)}})()})),c.value.confirmText=d((()=>""===r.value.cert_id?te("t_3_1747110185110"):te("t_2_1744861190040"))),i((async a=>{var l;try{if(await(null==(l=y.value)?void 0:l.validate()),""===r.value.cert_id){const{data:e}=await vt(r.value).fetch();r.value.cert_id=e}t(e.node.id,m.value),n.value=e.node.id,a()}catch(o){u(o)}})),()=>oe("div",{class:"upload-node-drawer"},[oe(h,{labelPlacement:"top"},null)])}}),ga=l({name:"UploadNode",props:{node:{type:Object,default:()=>({id:"",config:{}})}},setup(e,{expose:t}){const{renderNode:n}=Bn(e,ma,((e,t)=>te(e?"t_8_1745735765753":"t_9_1745735765287"))),{handleNodeClick:a}=Ln();return t({handleNodeClick:e=>{a(e,(e=>oe(ya,{node:e},null)))}}),n}}),ba=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"})),wa=Ne(),{flowData:Na,selectedNodeId:xa,setflowZoom:ka,initFlowData:Ca,updateFlowData:Sa,setShowAddNodeSelect:ja,addNode:za,getAddNodeSelect:$a,resetFlowData:Oa}=Mn(),{workflowData:Aa,addNewWorkflow:Ra,updateWorkflowData:Ia,resetWorkflowData:Da}=_t(),{handleError:Ea}=Pe();const Fa=l({name:"EndNode",setup:()=>()=>oe("div",{class:"flex flex-col items-center justify-center"},[oe("div",{class:"w-[1.5rem] h-[1.5rem] rounded-[1rem] bg-[#cacaca]"},null),oe("div",{class:"text-[#5a5e66] mb-[10rem]"},[Ce("流程结束")])])}),Ma="_add_iwsp6_1",Ba="_addBtn_iwsp6_23",qa="_addBtnIcon_iwsp6_49",Va="_addSelectBox_iwsp6_55",Pa="_addSelectItem_iwsp6_78",Ua="_addSelectItemIcon_iwsp6_98",Ta="_addSelectItemTitle_iwsp6_104",La="_addSelected_iwsp6_108",Ha="_addLeft_iwsp6_113",Za="_addRight_iwsp6_122",Wa=l({name:"AddNode",props:{node:{type:Object,default:()=>({})}},setup(e){const{isShowAddNodeSelect:t,nodeSelectList:n,addNodeBtnRef:a,addNodeSelectRef:l,addNodeSelectPostion:o,showNodeSelect:r,addNodeData:i,itemNodeSelected:s,excludeNodeSelectList:d}=function(){const e=Mn(),t=J(!1),n=J(null);return $a(),{...e,addNodeData:(e,n)=>{t.value=!1,e.id&&za(e.id,n,{id:xn()})},itemNodeSelected:()=>{clearTimeout(n.value)},isShowAddNodeSelect:t,showNodeSelect:(e,a)=>{e?(t.value=!1,t.value=e):(clearTimeout(n.value),n.value=window.setTimeout((()=>{t.value=e}),200)),a&&ja(e,a)}}}(),u=J();return ae((()=>e.node.type),(e=>{u.value=In[e]()||{}})),()=>oe("div",{class:Ma},[oe("div",{ref:a,class:Ba,onMouseenter:()=>r(!0,e.node.type),onMouseleave:()=>r(!1)},[oe(rt,{icon:"plus",class:qa,color:"#FFFFFF"},null),t.value&&oe("ul",{ref:l,class:[Va,1===o.value?Ha:Za]},[n.value.map((t=>{var n;return(null==(n=d.value)?void 0:n.includes(t.type))?null:oe("li",{key:t.type,class:[Pa,t.selected&&La],onClick:()=>i(e.node,t.type),onMouseenter:s},[oe(rt,{icon:"flow-"+t.icon.name,class:Ua,color:t.selected?"#FFFFFF":t.icon.color},null),oe("div",{class:Ta},[t.title.name])])}))])])])}}),Ja="_flowNodeBranch_yygcj_1",Ga="_multipleColumns_yygcj_6",Ya="_flowNodeBranchBox_yygcj_10",Ka="_hasNestedBranch_yygcj_15",Xa="_flowNodeBranchCol_yygcj_19",Qa="_coverLine_yygcj_39",el="_topLeftCoverLine_yygcj_43",tl="_topRightCoverLine_yygcj_47",nl="_bottomLeftCoverLine_yygcj_51",al="_bottomRightCoverLine_yygcj_55",ll="_rightCoverLine_yygcj_59",ol="_leftCoverLine_yygcj_63",rl="_flowConditionNodeAdd_yygcj_67",il=l({name:"BranchNode",props:{node:{type:Object,default:()=>({})}},setup(e){const{addNode:t}=Mn(),n=J(In[e.node.type]()||{});ae((()=>e.node.type),(e=>{n.value=In[e]()||{}}));const a=()=>{var n,a;const l=xn();t(e.node.id||"",Sn,{id:l,name:`分支${((null==(n=e.node.conditionNodes)?void 0:n.length)||0)+1}`},null==(a=e.node.conditionNodes)?void 0:a.length)},l=()=>{var t;const n=(null==(t=e.node.conditionNodes)?void 0:t.length)||0;return n>3?`${Ja} ${Ga}`:Ja},o=()=>{var t;const n=null==(t=e.node.conditionNodes)?void 0:t.some((e=>e.childNode&&["branch","execute_result_branch"].includes(e.childNode.type)));return n?`${Ya} ${Ka}`:Ya};return()=>{var t,r,i;return oe("div",{class:l()},[(null==(t=n.value.operateNode)?void 0:t.addBranch)&&oe("div",{class:rl,onClick:a},[(null==(r=n.value.operateNode)?void 0:r.addBranchTitle)||"添加分支"]),oe("div",{class:o()},[null==(i=e.node.conditionNodes)?void 0:i.map(((t,n)=>{var a,l;return oe("div",{class:Xa,key:n,"data-branch-index":n,"data-branches-count":null==(a=e.node.conditionNodes)?void 0:a.length},[oe(Al,{node:t},null),0===n&&oe("div",null,[oe("div",{class:`${Qa} ${el}`},null),oe("div",{class:`${Qa} ${nl}`},null),oe("div",{class:`${ll}`},null)]),n===((null==(l=e.node.conditionNodes)?void 0:l.length)||0)-1&&oe("div",null,[oe("div",{class:`${Qa} ${tl}`},null),oe("div",{class:`${Qa} ${al}`},null),oe("div",{class:`${ol}`},null)])])}))]),oe(Wa,{node:e.node},null)])}}}),sl=l({name:"BranchNode",props:{node:{type:Object,default:()=>({})}},setup(e){const{addNode:t}=Mn(),n=J(In[e.node.type]()||{});ae((()=>e.node.type),(e=>{n.value=In[e]()||{}}));const a=()=>{var n,a;const l=xn();t(e.node.id||"",Sn,{id:l,name:`分支${((null==(n=e.node.conditionNodes)?void 0:n.length)||0)+1}`},null==(a=e.node.conditionNodes)?void 0:a.length)},l=()=>{var t;const n=(null==(t=e.node.conditionNodes)?void 0:t.length)||0;return n>3?`${Ja} ${Ga}`:Ja},o=()=>{var t;const n=null==(t=e.node.conditionNodes)?void 0:t.some((e=>e.childNode&&["branch","execute_result_branch"].includes(e.childNode.type)));return n?`${Ya} ${Ka}`:Ya};return()=>{var t,r,i;return oe("div",{class:l()},[(null==(t=n.value.operateNode)?void 0:t.addBranch)&&oe("div",{class:rl,onClick:a},[(null==(r=n.value.operateNode)?void 0:r.addBranchTitle)||"添加分支"]),oe("div",{class:o()},[null==(i=e.node.conditionNodes)?void 0:i.map(((t,n)=>{var a,l;return oe("div",{class:Xa,key:n,"data-branch-index":n,"data-branches-count":null==(a=e.node.conditionNodes)?void 0:a.length},[oe(Al,{node:t},null),0===n&&oe("div",null,[oe("div",{class:`${Qa} ${el}`},null),oe("div",{class:`${Qa} ${nl}`},null),oe("div",{class:`${ll}`},null)]),n===((null==(l=e.node.conditionNodes)?void 0:l.length)||0)-1&&oe("div",null,[oe("div",{class:`${Qa} ${tl}`},null),oe("div",{class:`${Qa} ${al}`},null),oe("div",{class:`${ol}`},null)])])}))]),oe(Wa,{node:e.node},null)])}}}),dl="_node_fkn6k_1",ul="_nodeArrows_fkn6k_5",cl="_nodeContent_fkn6k_19",pl="_nodeHeader_fkn6k_44",vl="_nodeHeaderBranch_fkn6k_48",fl="_nodeCondition_fkn6k_52",_l="_nodeConditionHeader_fkn6k_56",hl="_nodeIcon_fkn6k_72",ml="_nodeHeaderTitle_fkn6k_80",yl="_nodeHeaderTitleInput_fkn6k_88",gl="_nodeClose_fkn6k_108",bl="_nodeBody_fkn6k_112",wl="_nodeErrorMsg_fkn6k_129",Nl="_nodeErrorMsgBox_fkn6k_133",xl="_nodeErrorIcon_fkn6k_137",kl="_nodeErrorTips_fkn6k_141",Cl=l({name:"BranchNode",props:{node:{type:Object,default:()=>({})}},setup:()=>()=>oe("div",null,[Ce("渲染节点失败，请检查类型是否支持")])}),Sl=Object.freeze(Object.defineProperty({__proto__:null,default:Cl},Symbol.toStringTag,{value:"Module"})),jl=l({name:"BaseNode",props:{node:{type:Object,required:!0}},setup(e){const t=z("taskComponents",{}),{validator:n,validate:a}=_n(),l=J(e.node.id||xn()),r=J(In[e.node.type]()||{}),i=J(null),s=J(!1),u=J(e.node.name),c=J(),p=J(),{removeNode:v,updateNode:f,selectedNodeId:_,selectedNode:h}=Mn(),m=J({isError:!1,message:null,showTips:!1}),y=d((()=>e.node.type===kn)),g=d((()=>{var e,t;return null==(t=null==(e=r.value)?void 0:e.operateNode)?void 0:t.remove})),b=d((()=>[Sn,zn].includes(e.node.type))),w=d((()=>{var t;return e.node.type===zn&&{success:"flow-success",fail:"flow-error"}[null==(t=e.node.config)?void 0:t.type]||""})),N=d((()=>{var t;return e.node.type===zn?(null==(t=e.node.config)?void 0:t.type)||"":"#FFFFFF"}));ae((()=>e.node),(()=>{r.value=In[e.node.type](),u.value=e.node.name,l.value=e.node.id||xn(),n.validateAll();const a=`${e.node.type}Node`;t&&t[a]?c.value=Ie(t[a]):c.value=Ie(De({loader:()=>Ee((()=>Promise.resolve().then((()=>Sl))),void 0,import.meta.url),loadingComponent:()=>oe("div",null,[Ce("Loading...")]),errorComponent:()=>oe(Cl,null,null)}))}),{immediate:!0});const x=e=>{m.value.showTips=e},k=()=>{var t;(null==(t=p.value)?void 0:t.handleNodeClick)&&e.node.type!==Sn&&e.node.type!==zn&&(_.value=e.node.id||"",p.value.handleNodeClick(h))},C=e=>{13===e.keyCode&&(s.value=!1)},S=e=>{const t=e.target;u.value=t.value,f(l.value,{name:u.value})};return()=>{var t,n,d,f,_,h;return oe("div",{class:[dl,!y.value&&ul]},[oe("div",{class:[cl,b.value&&fl],onClick:k},[oe("div",{class:[pl,b.value&&_l,w.value?"":vl],style:{color:null==(n=null==(t=r.value)?void 0:t.title)?void 0:n.color,backgroundColor:null==(f=null==(d=r.value)?void 0:d.title)?void 0:f.bgColor}},[w.value?oe(rt,{icon:w.value?w.value:(null==(h=null==(_=r.value)?void 0:_.icon)?void 0:h.name)||"",class:[hl,"!absolute top-[50%] left-[1rem] -mt-[.8rem]"],color:N.value},null):null,oe("div",{class:ml,title:"点击编辑"},[oe("div",{class:yl},[oe("input",{ref:i,value:u.value,onClick:e=>e.stopPropagation(),onInput:S,onBlur:()=>s.value=!1,onKeyup:C},null)])]),g.value&&oe("span",{onClick:t=>((e,t,n)=>{const l=a(t);l.valid&&Ue({type:"warning",title:te("t_1_1745765875247",{name:n.name}),content:n.type===Sn?te("t_2_1745765875918"):te("t_3_1745765920953"),onPositiveClick:()=>v(t)}),![zn].includes(n.type)&&l.valid||v(t),e.stopPropagation(),e.preventDefault()})(t,l.value,e.node),class:"flex items-center justify-center absolute top-[50%] right-[1rem] -mt-[.9rem]"},[oe(rt,{class:gl,icon:"close",color:b.value?"#333":"#FFFFFF"},null)])]),b.value?null:oe("div",{class:[bl]},[c.value&&o(c.value,{id:e.node.id,node:e.node||{},class:"text-center",ref:p})]),m.value.showTips&&oe("div",{class:wl},[oe("div",{class:Nl},[oe("span",{onMouseenter:()=>x(!0),onMouseleave:()=>x(!1)},[oe(rt,{class:xl,icon:"tips",color:"red"},null)]),m.value.message&&oe("div",{class:kl},[m.value.message])])])]),oe(Wa,{node:e.node},null)])}}}),zl="flex flex-col items-center w-full relative",$l="nested-node-wrap w-full",Ol="deep-nested-node-wrap w-full",Al=l({name:"NodeWrap",props:{node:{type:Object,default:()=>({})},depth:{type:Number,default:0}},setup:e=>({getDepthClass:()=>e.depth&&e.depth>1?e.depth>2?Ol:$l:zl}),render(){var e;if(!this.node)return null;const t=(this.depth||0)+1;return oe("div",{class:this.getDepthClass()},[this.node.type===Cn?oe(il,{node:this.node},null):null,this.node.type===jn?oe(sl,{node:this.node},null):null,[Cn,jn].includes(this.node.type)?null:oe(jl,{node:this.node},null),(null==(e=this.node.childNode)?void 0:e.type)&&oe(Al,{node:this.node.childNode,depth:t},null)])}}),Rl={flowContainer:"_flowContainer_4rj8i_1",flowProcess:"_flowProcess_4rj8i_5",flowZoom:"_flowZoom_4rj8i_9",flowZoomIcon:"_flowZoomIcon_4rj8i_13"},Il=l({name:"FlowChart",props:{isEdit:{type:Boolean,default:!1},type:{type:String,default:"quick"},node:{type:Object,default:()=>({})},taskComponents:{type:Object,default:()=>({})}},setup(e,{slots:t}){const n=ne(["borderColor","dividerColor","textColor1","textColor2","primaryColor","primaryColorHover","bodyColor"]),{flowData:a,selectedNodeId:l,flowZoom:o,resetFlowData:r}=Mn(),{initData:i,handleSaveConfig:s,handleZoom:d,goBack:u}=((e={type:"quick",node:Na.value,isEdit:!1})=>{const t=Ae(),n=Re();return e.node&&ae((()=>e.node),(e=>{Sa(e)}),{deep:!0}),{flowData:Na,selectedNodeId:xa,handleSaveConfig:()=>{const{validator:e}=_n(),a=e.validateAll();try{if(a.valid&&Na.value.name){const{active:e}=Aa.value,{id:a,name:l,childNode:o}=Na.value,{exec_type:r,...i}=o.config,s={name:l,active:e,content:JSON.stringify(o),exec_type:r,exec_time:JSON.stringify(i||{})};n.query.isEdit?Ia({id:a,...s}):Ra(s),t.push("/auto-deploy")}else Na.value.name||wa.error("保存失败，请输入工作流名称");for(const e in a.results)if(a.results.hasOwnProperty(e)){const t=a.results[e];if(!t.valid){wa.error(t.message);break}}}catch(l){Ea(l).default(te("t_12_1745457489076"))}},handleZoom:e=>{ka(e)},handleRun:()=>{wa.info(te("t_8_1744861189821"))},goBack:()=>{t.back()},initData:()=>{Oa(),Da(),e.isEdit&&e.node?Sa(e.node):"quick"===e.type?Ca():"advanced"===e.type&&Sa(e.node)}}})({type:null==e?void 0:e.type,node:null==e?void 0:e.node,isEdit:null==e?void 0:e.isEdit});return w("taskComponents",e.taskComponents),ye(i),le(r),()=>{var e;return oe("div",{class:"flex flex-col w-full h-full",style:n.value},[oe("div",{class:"w-full h-[6rem] px-[2rem] mb-[2rem] rounded-lg flex items-center gap-2 justify-between"},[oe("div",{class:"flex items-center"},[oe(ce,{onClick:u},{default:()=>[oe(Fe,{class:"mr-1"},{default:()=>[oe(Ct,null,null)]}),te("t_0_1744861190562")]})]),oe("div",{class:"flex items-center ml-[.5rem]"},[oe(fe,{value:a.value.name,"onUpdate:value":e=>a.value.name=e,placeholder:te("t_0_1745490735213"),class:"!w-[30rem] !border-none "},null)]),oe("div",{class:"flex items-center gap-2"},[oe(ce,{type:"primary",onClick:s,disabled:!l},{default:()=>[oe(Fe,{class:"mr-1"},{default:()=>[oe(jt,null,null)]}),te("t_2_1744861190040")]})])]),oe("div",{class:"w-full flex"},[oe("div",{class:Rl.flowContainer},[oe("div",{class:Rl.flowProcess,style:{transform:`scale(${o.value/100})`}},[oe(Al,{node:a.value.childNode},null),oe(Fa,null,null)]),oe("div",{class:Rl.flowZoom},[oe("div",{class:Rl.flowZoomIcon,onClick:()=>d(1)},[oe(rt,{icon:"subtract",class:`${50===o.value?Rl.disabled:""}`,color:"#5a5e66"},null)]),oe("span",null,[o.value,Ce("%")]),oe("div",{class:Rl.flowZoomIcon,onClick:()=>d(2)},[oe(rt,{icon:"plus",class:`${300===o.value?Rl.disabled:""}`,color:"#5a5e66"},null)])])])]),null==(e=t.default)?void 0:e.call(t)])}}}),Dl=l({name:"WorkflowView",setup(){const{init:e}=(()=>{const{workflowType:e,detectionRefresh:t}=_t(),n=Re(),a=Ae(),l=e=>(e.preventDefault(),e.returnValue=te("t_16_1747886308182"),te("t_16_1747886308182"));return le((()=>{window.removeEventListener("beforeunload",l)})),{init:()=>{window.addEventListener("beforeunload",l);const o=n.query.type;o&&(e.value=o),t.value||"/auto-deploy"===n.path||a.push("/auto-deploy")}}})(),{workflowType:t,workDefalutNodeData:n,isEdit:a}=_t(),l=Object.assign({"./node/apply/index.tsx":Zn,"./node/deploy/index.tsx":ra,"./node/notify/index.tsx":ua,"./node/start/index.tsx":_a,"./node/upload/index.tsx":ba}),o=J({});return Me((()=>{const e={};Object.entries(l).forEach((([t,n])=>{const a=t.match(/\/node\/([^/]+)\/index\.tsx$/);if(a&&a[1]){const t=a[1];e[`${t}Node`]=n.default||n}})),o.value=e})),ye(e),()=>oe(Il,{type:t.value,node:n.value,isEdit:a.value,taskComponents:o.value},null)}});export{Dl as default};
